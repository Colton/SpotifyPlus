!function(a,b){"use strict";function c(a){var e=d[a];if(!e){var f=b[a];if(!f)throw new Error("module "+a+" not found");e=d[a]={};var g=e.exports={};f.call(g,c,e,g,window)}return e.exports}var d=c.cache={};c.resolve=function(a){return a},c.node=function(){return{}};var e,f=/(@loc)\b/g,g=Array.prototype.join,h=function(a,d,h,i){var j=function(c){var d=a.replace(f,c);return b[d]?d:null},l=[],m=function(){var a=g.call(arguments,"-");-1===l.indexOf(a)&&l.push(a)};i&&(m(d,h,i),m(d,i)),h&&m(d,h),m(d),m("en");var n,o;for(n=0;n<e.length;n++)m(e[n]);var p=a.split("/"),q=[];for(n=p.length;n>1;n--){var r=p.slice(0,n).join("/")+"/"+k,s=b[r];if(s){q=c(r);break}}for(n=0;n<q.length;n++)m(q[n]);for(n=0;n<l.length;n++)if(o=j(l[n]))return o;throw new Error(a+" not found.")},i=function(b){var d=b.replace(/_/g,"-").toLowerCase().split("-"),e=d[0],f=d[1],g=d[2];c.loc=function(a){return c(h(a,e,f,g))},c(a)},j=function(a){throw new Error(a+" not found")},k="@supported-languages.json";try{e=c("./"+k)}catch(l){}if(e){var m=window.__spotify&&window.__spotify.locale;if(m)i(m);else{var n=c("./@sp.js");try{n.request("session_query",[],null,function(a){i(a.language)},function(){i("en")})}catch(l){c.loc=j,c(a)}}}else c.loc=j,c(a)}("./lib/index.js",{"./lib/index.js":function(a,b,c,d){function e(){var a=document.querySelector("#ad-page-frame");f.register(h),f.register(i),f("spotify:application").update({version:g.version}),f("spotify:application").query("appURI",function(b,c){var d=null;c&&c.appURI&&(d=c.appURI.split(":").pop(),j.load(d,a))}),f("spotify:application").on("update",function(b){"arguments"in b&&j.load(b.arguments,a)}),window.parent.postMessage({type:"notify_loaded"},"*")}var f=a("./node_modules/spotify-live/index.js"),g=a("./package.json"),h=a("./node_modules/spotify-live-models/client.js"),i=a("./node_modules/spotify-live-models/application.js"),j=a("./lib/page-loader.js"),k=Function.prototype.bind.bind(Function.prototype.call),l=k(Element.prototype.addEventListener);l.bind(document,"DOMContentLoaded");"complete"==document.readyState?setTimeout(e):document.addEventListener("DOMContentLoaded",e)},"./@sp.js":function(a,b,c,d){b.exports=a("./node_modules/quickstart-spotify/spotify-api.js").SP},"./node_modules/quickstart-spotify/spotify-api.js":function(a,b,c,d){"use strict";var e=a("./node_modules/api/scripts/core.js"),f=a(window._getSpotifyModule?"./node_modules/api/scripts/core.desktop.js":"./node_modules/api/scripts/core.browser.js");c.SpotifyApi=e,c.SP=f,c.LangModule=e.LangModule},"./node_modules/api/scripts/core.js":function(a,b,c,d){function e(){this._modules={},this._requested={},this._moduleQueue=[],this._delayedFns=[],this._parallelReqs=4,this._contextStack=[],this._deferredFlush=!1,this._useLoadingTimeout=!1,this._patchRequestOpen()}function a(a,b){return e.api._require("__main__",{callback:function(){},waiting:1/0},[],a,b)}var f={};e.AnalyticsContext=function(a){this.name=a,this.id=e.AnalyticsContext._nextId++,this.references=0,this._begin()},e.AnalyticsContext._nextId=1,e.AnalyticsContext.prototype.addReference=function(){this.references++},e.AnalyticsContext.prototype.removeReference=function(){this.references--,0===this.references&&this._end()},e.AnalyticsContext.prototype._begin=function(){e.api.request("core_context_begin",[this.id,this.name],this)},e.AnalyticsContext.prototype._end=function(){e.api.request("core_context_end",[this.id],this)},e.prototype.analyticsContext=function(a,b){var c=new e.AnalyticsContext(a);c.addReference(),this._contextStack.push(c);try{b()}finally{this._contextStack.pop(),c.removeReference()}},e.Callback=function(a,b){this._func=a,this._setContextStack(b||e.api._contextStack)},e.Callback.prototype.apply=function(a,b){try{var c=e.api._contextStack;e.api._contextStack=this._contextStack,this._func.apply(a,b)}catch(d){setTimeout(function(){throw d},0)}finally{e.api._contextStack=c,this.clear()}},e.Callback.prototype.call=function(a,b){this.apply(a,Array.prototype.slice.call(arguments,1))},e.Callback.prototype.copy=function(){return new this.constructor(this._func,this._contextStack)},e.Callback.prototype.clear=function(){this._releaseContextStack(),delete this._func,delete this._contextStack},e.Callback.prototype._setContextStack=function(a){for(var b=0,c=a.length;c>b;++b)a[b].addReference();this._contextStack=a.slice(0)},e.Callback.prototype._releaseContextStack=function(){for(var a=this._contextStack,b=0,c=a.length;c>b;++b)a[c-b-1].removeReference()},e.prototype.callback=function(a){return new e.Callback(a)},e.prototype._getContextIdForRequest=function(){var a=this._contextStack;return a.length?a[a.length-1].id:0},window.addEventListener("message",function(a){if(a.source==window&&"api-delay"==a.data){a.stopPropagation();for(var b=e.api._delayedFns.splice(0),c=0,d=b.length;d>c;c++)b[c].call()}}),e.prototype._prepareFlush=function(a){this._deferredFlush||"core_flush"==a||(this._deferredFlush=!0,this.defer(this,this._flushRequests))},e.prototype._flushRequests=function(){this._deferredFlush=!1,this.request("core_flush",[])},e.prototype.defer=function(a,b){1==this._delayedFns.push(this.bind(this.callback(b),a))&&window.postMessage("api-delay","*")},e.prototype._evalModule=function(a,b,c,d){return/\.lang$/.test(c)?this._evalLangModule(c,d):this._evalJSModule(a,b,c,d)},e.prototype._evalJSModule=function(a,b,c,d){var e=this,f={__name:c},g=function(d,g){f.__waiting=!0;var h=function(){return f.__waiting=!1,g.apply(this,arguments)};return h.__native=!0,e._require(c,a,b,d,h)};try{return d="'use strict';"+d+"\n//@ sourceURL="+c,new Function("require","exports","SP","_code","eval(_code)").call({},g,f,this,d),f}catch(h){throw h.message+=" in "+c,h}},e.LangModule=function(a,b){this.__name=a,this.strings=b},e.LangModule.prototype.get=function(a,b){for(var c,d,e=this.strings.hasOwnProperty(a)?this.strings[a]:a,f="",g=0;(c=e.indexOf("{",g))>-1&&(d=e.indexOf("}",c+1),-1!=d);){var h=arguments[parseInt(e.substring(c+1,d))+1];f+=void 0!==h?e.substring(g,c)+h:e.substring(g,d+1),g=d+1}return g?f+e.substring(g):e},e.prototype._evalLangModule=function(a,b){try{return new e.LangModule(a,JSON.parse(b))}catch(c){throw new Error('Cannot import language file "'+a+'": '+c.message)}},e.prototype._fireCallbacks=function(a){for(;a&&(a.waiting--,!a.waiting);)a.unpacked.forEach(function(b){var c=b.position,d=a.args[c],e=b.property;if(!(e in d))throw new Error('No "'+e+'" exported in module "'+d.__name+'"');a.args[c]=d[e]}),a.callback.apply({},a.args),a.waiting=1/0,a=a.parent},e.prototype._createRequest=function(a,b){var c,d,e,f;c=new XMLHttpRequest,c.open("GET",a,!0),c.onreadystatechange=function(){var d,g,h;if(d=4===c.readyState){if(clearTimeout(e),f)throw new Error('Could not load file "'+a+'"; Timed out.');if(g=0===c.status&&!!c.responseText,h=200===c.status||g,!h)throw new Error('Could not load file "'+a+'"; Not found.');b(c.responseText)}},this._useLoadingTimeout&&(d=1500,e=setTimeout(function(){f=!0,c.abort()},d)),c.send(null)},e.prototype._loadModule=function(a,b,c,d,e){var f=this,g=this._modules[c];g&&!g.__waiting?(a.args[d]=this._modules[c],e&&a.unpacked.push({property:e,position:d}),this._fireCallbacks(a)):this._requested[c]||!this._parallelReqs?this.defer(this,function(){this._loadModule(a,b,c,d,e)}):(this._requested[c]=!0,this._parallelReqs--,this._createRequest(c,function(g){f._parallelReqs++;var h=f._modules[c]=f._evalModule(a,b,c,g);a.args[d]=h,e&&a.unpacked.push({property:e,position:d}),f._fireCallbacks(a)}))},e.prototype._resolveModule=function(a){if(!/\.lang$/.test(a)){var b=a.match(/^(\$(?:[^\/]+)\/)(?!scripts)(.*)/);b&&(a=b[1]+"scripts/"+b[2]),a+=".js"}return a},e.prototype._require=function(a,b,c,d,e){if("string"==typeof d&&(d=[d]),!d||!d.length)throw new Error("Missing modules argument to require().");if(!e||"function"!=typeof e)throw new Error("Missing callback function argument to require().");var f=d.length,g={name:a,parent:b,waiting:f,callback:e,args:new Array(f),unpacked:[]};b.waiting++;for(var h=0,i=f;i>h;h++){var j=d[h];if(!j)throw new Error("Empty module name in require.");var k=j.split("#");j=this._resolveModule(k[0]),k=k[1];var l=c.slice(0),m=c.indexOf(j);if(l.push(j),-1!=m)throw l=l.slice(m).join(" -> "),new Error('Circular Dependency on Module "'+j+'": '+l);this._loadModule(g,l,j,h,k)}},e.prototype.varargs=function(a,b,c){if(b||(b=0),Array.isArray(a[b])){if(a.length>b+1)throw new Error("Ambiguous use of varargs");a=a[b],b=0}return b||c?Array.prototype.slice.call(a,b):a},e.prototype.uris=function(a,b){for(var c=this.varargs(a,b),d=[],e=0,f=c.length;f>e;e++)d.push(c[e].uri);return d},e.prototype.bind=function(a,b,c){if(arguments.length>2){var d=Array.prototype.slice,e=Function.prototype.bind;if(e&&a.bind===e)return e.apply(a,d.call(arguments,1));var f=d.call(arguments,2);return function(){return a.apply(b,arguments.length?f.concat(d.call(arguments)):f)}}return function(){return a.apply(b,arguments)}},e.prototype.inherit=function(a,b){var c=function(){};return c.prototype=a._superClass=b.prototype,a.prototype=new c,a.prototype.constructor=a,a},e.prototype._patchRequestOpen=function(){var a=XMLHttpRequest.prototype.open,b=document.createElement("a"),c=window.location;XMLHttpRequest.prototype.open=function(d,e){var f=a.apply(this,arguments);return b.href=e,(":"==b.protocol&&!b.hostname||b.protocol==c.protocol&&b.hostname==c.hostname)&&this.setRequestHeader("X-Spotify-Requested-With","XMLHttpRequest"),f}},e.prototype.resolvePath=function(a){return a},f.require=a,String,String.prototype.decodeForText=function(){return this.toString()},String.prototype.decodeForHtml=function(){var a={"&":"&amp;","<":"&lt;",">":"&gt;"},b=function(b){return a[b]};return function(){return this.replace(/[&<>]/g,b)}}(),String.prototype.decodeForLink=function(){return encodeURI(this)},e.Bases={uri:"spotify",url:"http://open.spotify.com"},e.Exps={spotify:/^spotify:(.+)$/,http:/^https?:\/\/(play|open)\.spotify\.com\/(.+)$/},String.prototype.toSpotifyURL=function(){var a=this.match(e.Exps.spotify);if(!a)return this;var b=a.pop().replace(/:$/,"").split(/:/),c=b.shift();return"search"==c&&(b=[b.join(":")]),b.unshift(e.Bases.url,c),b.join("/")},String.prototype.toSpotifyURI=function(){var a=this.match(e.Exps.http);if(!a)return this;var b=a.pop().replace(/\/$/,"").split(/\//);return b.unshift(e.Bases.uri),b.join(":")},String.prototype.toSpotifyLink=function(){return this.toSpotifyURI()},b.exports=e},"./node_modules/api/scripts/core.desktop.js":function(a,b,c,d){var e=a("./node_modules/api/scripts/core.js");!function(){e.prototype._throwError=!0;var a,b=window._getSpotifyModule("bridge");try{a=window._getSpotifyModule("core")}catch(c){}a&&(e.prototype._createRequest=function(b,c){this.defer(this,function(){var d=a.readFile(b);if(void 0===d)throw new Error('Could not load module "'+b+'"; Not found.');c(d)})}),e.prototype.request=function(a,c,d,e,f){var g=this._getContextIdForRequest(),h=JSON.stringify({name:a,args:c,context:g});b.executeRequest(h,{onSuccess:function(a){e&&e.call(d,JSON.parse(a))},onFailure:function(a){a=JSON.parse(a),f&&f.call(d,a)}}),this._prepareFlush(a)},e.api=new e,e.api.container="desktop"}(),b.exports=e.api},"./node_modules/api/scripts/core.browser.js":function(a,b,c,d){var e=a("./node_modules/api/scripts/core.js");!function(){var a=0,b={};e.prototype._throwError=!0,e.prototype._useLoadingTimeout=!0;var c=window.manifest,d=c&&c.VendorIdentifier||"unknown",f=c&&c.BundleVersion||"";f.match(/^\d+\.\d+\.\d+$/)||(f="0.0.0");var g=window.dependencies,h=g["static"],i=h.replace(/\/([^\/]*)$/,""),j=i+"/",k=["en.loc"],l=window.location.search.match(/locale=([^&]+)/);if(l){k=l.pop().split(",");for(var m=k.length;m--;){var n=k[m];k[m]=-1!=n.indexOf(".loc")?n:n+".loc"}}var o,p={},q="en";if(g.locale&&!Array.isArray(g.locale)){var r=g.locale;for(var s in r){o=r[s],s+=".loc";for(var t=0,u=o.length;u>t;t++)p[s+"/"+o[t]]=!0;p[s+"/scripts/momentLang.js"]=!0}for(var v=0,w=k.length;w>v;v++)if(o=k[v].replace(".loc",""),g.locale[o]&&g.locale[o].length){q=o;break}}if(window.manifest&&Array.isArray(c.SupportedLanguages))for(var x=c.SupportedLanguages,y=0,z=k.length;z>y;y++){o=k[y].replace(".loc","");var A=x.indexOf(o);if(-1!=A){q=o;break}}var B=e.prototype._resolveModule;e.prototype._resolveModule=function(a){var b,c=B(a),d=c.match(/^\$([a-z\-\_]+)(\/.*)/),e=!1,f=!1;d?(e=d[1],b=d[2]):/^\//.exec(c)&&(f=!0);var j=!1;if(/\.lang$/.exec(c)||/momentLang\.js$/.exec(c))if(e)j=k[0],c="$"+e+"/"+(b="/"+j+b);else{c=/^\//.test(c)?c:"/"+c;for(var l="",m=0,n=k.length;n>m&&(j=k[m],l=j+c,!p[l]);m++);c=(f?"/":"")+l}return e&&g[e]?c=g[e]+b:(e?c="/"+e+b:f||(c="/"+c),c=(e?i:h)+c),c};var C=window.MutationObserver||window.WebKitMutationObserver;if(C){var D=new C(function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b],e=d.addedNodes;if(!e.length)return this;for(var f=h+"/$",g=0,i=e.length;i>g;g++){var k=e[g];if("link"==k.tagName.toLowerCase()&&/^\$/.test(k.getAttribute("href"))){var l=k.href;k.href=l.replace(f,j)}}}});D.observe(document.head,{childList:!0})}else{var E=function(a){if(a.target===document.head)for(var b=document.head.querySelectorAll('link[href^="$"]'),c=h+"/$",d=0,e=b.length;e>d;d++){var f=b[d];if(/^\$/.test(f.getAttribute("href"))){var g=f.href;f.href=g.replace(c,j)}}};document.head.addEventListener("DOMSubtreeModified",E)}if("XDomainRequest"in window){var F=e.prototype._createRequest;e.prototype._createRequest=function(a,b){if(!/^http/.test(a))return F(a,b);var c=new XDomainRequest;c.onprogress=function(){},c.onerror=function(){throw new Error('Could not load module "'+a+'"; Not found.')},c.onload=function(){b(c.responseText)},c.open("GET",a),c.send(null)}}var G={hermes_register_schema:1};e.prototype.request=function(c,e,h,i,j){var k=window.top;if(k===window)return this;var l={type:"bridge_request",id:a++,name:c,args:e,appVendor:d,appVersion:f};if(G[c]&&(l.deps=g),"session_query"==c){var m=i;i=function(a){return a&&(a.language=q),m.call(this,a)}}return k.postMessage(JSON.stringify(l),"*"),i?(b[l.id]={success:i,failed:j,caller:h},void this._prepareFlush(c)):this},e.prototype._requestReply=function(a){var c=a.data;if("string"==typeof c)try{c=JSON.parse(c)}catch(a){return this}var d=b[c.id];return d?void(c.success&&d.success?d.success.call(d.caller,c.payload):!c.success&&d.failed&&d.failed.call(d.caller,c.payload)):this},e.prototype.resolvePath=function(a){var b="._resolve_",c=this._resolveModule(a+b),d=a.split(".");if(d.length>1){var e=d[d.length-1];"js"!==e&&(c=c.replace("scripts/",""));var f=".js";c=c.slice(0,-(b.length+f.length))}else c=c.replace(b,"");return c},e.api=new e,e.api.container="web",window.addEventListener("message",e.api._requestReply,!1),e.Bases.url="https://play.spotify.com",String.prototype.toSpotifyLink=function(){return this.toSpotifyURL()},document.documentElement.addEventListener("click",function(a){var b=a.target;do if("a"===b.nodeName.toLowerCase())break;while((b=b.parentNode)&&b!==document.body);if(b&&b!==document.body){var c=b.href,d=null;e.Exps.http.test(c)?d=c.toSpotifyURI():e.Exps.spotify.test(c)&&(d=c),d&&(a.defaultPrevented||(a.preventDefault(),e.api.request("application_open_uri",[d,null])))}});var H=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(a,b){for(var c=this.length>>>0,d=0>b?Math.max(0,c+b):b||0;c>d;d++)if(this[d]===a)return d;return-1}),String.prototype.trim||(String.prototype.trim=function(){return String(this).replace(/^\s+|\s+$/g,"")}),Function.prototype.bind||(Function.prototype.bind=function(a){var b=this,c=arguments.length>1?H.call(arguments,1):null,d=function(){},e=function(){var f=a,g=arguments.length;this instanceof e&&(d.prototype=b.prototype,f=new d);var h=c||g?b.apply(f,c&&g?c.concat(H.call(arguments)):c||arguments):b.call(f);return f==a?h:f};return e}),function(){if(window.metadata){var a="["+window.metadata.identifier+" "+window.metadata.version+"]",b=window.console,c=Function.prototype.apply,d=["debug","error","info","log","warn"];b&&d.forEach(function(d){var e=b[d];e&&(b[d]=function(){var d=H.call(arguments);return"string"==typeof d[0]?d[0]=a+" "+d[0]:d.unshift(a),c.call(e,b,d)})})}}();var I={_modifiers:{},_keymap:{},_ignore:{},_bindings:{},_empty:function(){},init:function(){e.api.request("keyboard_get_bindings",[],this,function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b])}.bind(this),this._empty),window.addEventListener("keydown",this.handleOwn.bind(this,!1)),window.addEventListener("keyup",this.handleOwn.bind(this,!0))},handleOwn:function(a,b){var c=b.target;if(this._ignore[c.tagName.toLowerCase()])return this;var d=this._keymap[b.which||b.keyCode];if(!d)return this;var f=this._modifiers;b.altKey&&(d|=f.alt),b.metaKey&&(d|=f.meta),b.ctrlKey&&(d|=f.ctrl),b.shiftKey&&(d|=f.shift);var g=this._bindings[d];return g?(b.preventDefault(),b.stopPropagation(),void(a&&e.api.request("keyboard_trigger_binding",[g],this,this._empty,this._empty))):this}};I.init()}(),b.exports=e.api},"./package.json":function(a,b,c,d){b.exports={name:"ad",version:"0.0.7",description:"Handles ad uri requests which include ad pages among other ads",license:"SpotifyInternal",publishConfig:{registry:"http://npm-registry.spotify.net"},main:"lib/index.js",repository:{type:"git",url:"https://ghe.spotify.net/ads/spotify-adpages"},keywords:["Ad","Pages"],author:"Cream <cream@spotify.com>",devDependencies:{chai:"~1.9.x",grunt:"~0.4","grunt-contrib-clean":"~0.5.0","grunt-contrib-copy":"~0.5.0","grunt-contrib-jshint":"~0.10.0","grunt-contrib-uglify":"~0.4.0","grunt-jscs-checker":"~0.4.0","grunt-mocha-test":"~0.10.0","grunt-shell":"^1.1.1","load-grunt-tasks":"~0.4.0",mocha:"~1.18.0",quickstart:"^1.0.1","quickstart-spotify":"^0.5.1","spotify-cosmos-resolver-mock":"^0.7.0","spotify-packager":"1.0.0","stitch-manifest-gen":"^0.3.5"},dependencies:{bluebird:"^2.2.2","spotify-cosmos-api":"^1.3.0","spotify-live":"^1.5.0","spotify-live-models":"^1.19.0"}}},"./lib/page-loader.js":function(a,b,c,d){var e=a("./lib/ad-preview.js"),f=a("./node_modules/spotify-live/index.js");a("./package.json");f.register("spotify-live-models/client"),f.register("spotify-live-models/application");var g=function(){function a(a,e){b(a)?e.src="//"+c(a):d(a,e)}function b(a){var b=/^(spoti.fi[\/\:])/i;return b.test(a)}function c(a){return a.replace(":","/")}function d(a,b){var c="session(device, product, language), currentUser(uri, name, username)";f("spotify:client").query(c,function(c,d){var f=d.session,g=d.currentUser,h=new e(f.language,f.product);h.fetchAdPage(a,g.username).done(function(a){if(console.info("asp response",a),a&&a.body){var c=JSON.parse(a.body);c&&c.url&&(b.src=c.url)}})})}return{load:a,_isSpotiLink:b,_normalizeLink:c}};b.exports=g()},"./lib/ad-preview.js":function(a,b,c,d){function e(a,b,c){return this instanceof e?(this.language=a,this.productVersion=b,void(this.resolver=c||f.resolver)):new e(a,b,c)}var f=a("./node_modules/spotify-cosmos-api/index.js"),g=a("./node_modules/bluebird/js/browser/bluebird.js");e.prototype.fetchAdPage=function(a,b){var c=g.defer();return this.resolver.get("hm://asp/v1/adpage?username="+b+"&ip=127.0.0.1&gid="+a,function(a,b){c.resolve(b.toJSON())}),c.promise},e.prototype.fetchAd=function(a){var b=g.defer(),c=new f.Request("POST","sp://ads/v1/preview/"+a,null,{});return f.resolver.resolve(c,function(){b.resolve()}),b.promise},b.exports=e},"./node_modules/spotify-live/index.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/prime/index.js"),f=a("./node_modules/spotify-live/node_modules/prime/defer.js"),g=a("./node_modules/spotify-live/node_modules/prime/emitter.js"),h=a("./node_modules/spotify-live/node_modules/mout/lang/kindOf.js"),i=a("./node_modules/spotify-live/node_modules/mout/object/forIn.js"),j=a("./node_modules/spotify-live/node_modules/mout/lang/isPlainObject.js"),k=a("./node_modules/spotify-live/node_modules/mout/object/filter.js"),l=a("./node_modules/spotify-live/node_modules/mout/object/mixIn.js"),m=a("./node_modules/spotify-live/node_modules/mout/array/difference.js"),n=a("./node_modules/spotify-live/node_modules/mout/array/forEach.js"),o=a("./node_modules/spotify-live/node_modules/mout/array/combine.js"),p=a("./node_modules/spotify-live/node_modules/mout/array/append.js"),q=a("./node_modules/spotify-live/node_modules/mout/array/remove.js"),r=a("./node_modules/spotify-live/node_modules/mout/array/filter.js"),s=a("./node_modules/spotify-live/node_modules/mout/array/map.js"),t=a("./node_modules/spotify-live/node_modules/finally/index.js"),u=Array.prototype.splice,v=Array.prototype.slice,w=g.EMIT_SYNC,x=a("./node_modules/spotify-live/util/range.js").Range,y=a("./node_modules/spotify-live/util/parser.js"),z=function(a){if(a instanceof B||a instanceof D)return"live";if(j(a))return"Array"===h(a.operations)?"list":"object";var b=h(a);return"Array"===b?"list":"String"===b?"string":null},A=function(a){return a instanceof D||a instanceof B?a.serialize():a},B=e({mixin:g,constructor:function(a){this.length=a||0,this._index=[]},_mesh:function(a,b,c,d){a=+a||0,b=+b||0,c||(c=[]),a>this.length&&(this.length=a),a+b>this.length&&(b=this.length-a);var e=c.length,f=new x(a,a+b),g=new x(a,a+e);b&&(this._index=f.extract(this._index)),e&&(this._index=g.insert(this._index)),c=s(c,function(a){switch(z(a)){case"object":return I(a,d);case"list":return J(a,d)}return a});var h,i=6e4;if(c.length>i)for(var j=0,k=!!b;j<c.length||k;){var l=c.slice(j,j+i),m=u.apply(this,[j+a,k?b:0].concat(l));k&&(h=m),j+=i,k=!1}else h=u.apply(this,[a,b].concat(c));if(b||e){var n={index:a,insert:c,remove:h};this.emit("update",n),d&&this.emit("publish",n)}return h},update:function(a){return this._update(a)},publish:function(a){return this._update(a,!0)},_update:function(a,b){var c;switch(h(a)){case"Array":c=[{index:0,remove:this.length,insert:a}];break;case"Object":c=a.operations;break;default:c=[]}return n(c,function(a){a.length&&(this.length=a.length),this._mesh(a.index,a.remove,a.insert,b)},this),this},serialize:function(){var a;return a=1===this._index.length&&this.length===this._index[this._index.length-1].end?[]:{length:this.length},n(this._index,function(b){for(var c=b.start;c<b.end;c++)a[c]=A(this[c])},this),a},query:function(a,b,c){c||(c=M);var d;return F(this,{query:y(a)},function(a,e,g){b?g&&c===M?f(function(){b(null,e)}):b(null,e):d=e},!b||c===N),b?this:d},_wait:function(a){var b=this;if(this._waiting||(this._waiting=[]),this._required||(this._required=[]),n(this._waiting,function(b){a=b.remove(a)}),a.length){var c=this._required.length;n(a,function(a){b._required=a.merge(b._required)}),0===c&&f(function(){n(this._required,function(a){b._waiting=a.merge(b._waiting)}),this.emit("wait",this._required);var a;K.debug&&(a=setTimeout(function(){console.warn(b,"is waiting for",b._waiting),a=null},2e3)),n(this._required,function(c){b.get(c,function(d){return d?console.error(d):(b._waiting=c.remove(b._waiting),void(K.debug&&(console.log(b,"done waiting for",c),!b._waiting.length&&a&&clearTimeout(a))))})}),delete this._required},this)}},_get:function(a,b){var c=this,d=function(){var b=c._index;return n(a,function(a){b=a.subtract(b)}),b},e=d();if(e.length){this._wait(e);var f=function(){var a=d();a.length||(c.off("update",f),b())};this.on("update",f)}else b(null,!0)},get:function(a,b){if(1===arguments.length&&"number"==typeof a)return this[a];var c,d,e,g=this,i=v.call(arguments),j=!1,k=!1;if(n(i,function(a,b){if("Function"===h(a)){var e=i.splice(b,2);return c=e[0],d=e[1]||M,!1}}),a instanceof x)e=i,e.length>1&&(j=!0);else if("Array"===h(a))j=!0,e=a;else{var l=!isNaN(+b);l||(b=a+1),k=!l,e=[new x(a,b)]}var m=function(b){if(k)return g[a];if(b)return s(e,function(a){return v.call(g,a.start,a.end)});var c=e[0];return v.call(g,c.start,c.end)},o=function(){return c.apply(null,[null].concat(m(!0)))};return c?(d===N?o():this._get(e,function(a,b){b&&d===M?f(o):o()}),this):m(j)}}),C={},D=e({mixin:g,constructor:function(a){this.uri=a,this._data={},this.emit("init",w)},"delete":function(a){var b=this._data,c=b[a];return delete b[a],c},emit:function(){var a=this.uri;if(a){var b=L.keys,c=L.values,d=v.call(arguments);d.splice(1,0,this),n(b,function(b,e){if(a.match(b)){var f=c[e];f.emit.apply(f,d)}})}g.prototype.emit.apply(this,arguments)},update:function(a){return this._update(a)},publish:function(a){return this._update(a,!0)},_update:function(a,b){var c=this._data,d=this._emit;if(!d){var e=l({},c);d=this._emit={publish:{},update:{}},f(function(){var a=k(d.update,function(a,b){return c[b]!==e[b]}),b=k(d.publish,function(a,b){return c[b]!==e[b]});delete this._emit;var f;for(f in a){this.emit("update",a,w);break}for(f in b){this.emit("publish",b,w);break}},this)}return i(a,function(a,e){var f=c[e],g=z(a);"list"===g&&f instanceof B?f._update(a,b):("object"===g?a=I(a,b):"list"===g&&(a=J(a,b)),c[e]=d.update[e]=a,b&&(d.publish[e]=a))},this),this},serialize:function(){var a={},b=this._data;for(var c in b)a[c]=A(b[c]);return a},query:function(a,b,c){c||(c=M);var d;return E(this,y(a),function(a,e,g){b?g&&c!==O&&c!==N?f(function(){b(null,e)}):b(null,e):d=e},!b||c===N),b?this:d},_wait:function(a){var b=this._waiting||(this._waiting=[]),c=this._required||(this._required=[]),d=m(a,b);if(d.length){var e=c.length;o(c,d),0===e&&f(function(){p(b,c),this.emit("wait",c);var a,d;K.debug&&(a=this.uri,d=setTimeout(function(){console.warn(a,"is waiting _for",b),d=null},2e3));var e=this;n(c,function(c){e.get(c,function(e){return e?console.error(e):(q(b,c),void(K.debug&&(console.log(a,"done waiting for",c),!b.length&&d&&clearTimeout(d))))})}),delete this._required},this)}},_get:function(a,b){var c=this,d=this._data,e=r(a,function(a){return!(a in d)});if(e.length){this._wait(e);var f=function(a){for(var d in a)q(e,d);e.length||(c.off("update",f),b())};this.on("update",f)}else b(null,!0)},get:function(a){var b=this._data;if(1===arguments.length&&"string"==typeof a)return b[a];var c,d,e,g=v.call(arguments);n(g,function(a,b){if("Function"===h(a)){var e=g.splice(b,2);return c=e[0],d=e[1]||M,!1}});var i=!1;"Array"===h(a)?(e=a,i=!0):(e=g,e.length>1&&(i=!0));var j=function(a){return a?s(e,function(a){return b[a]}):b[e[0]]},k=function(){c.apply(null,[null].concat(j(!0)))};return c?(d===N?k():this._get(e,function(a,b){b&&d===M?f(k):k()}),this):j(i)}}),E=function(a,b,c,d){var e={};b||(b=[]);var f=s(b,"key");if(!f.length)return c(null,e,!0);var g=function(f,g){var h=t();h.parallel(b,function(b){var c=this,f=b.key,h=a._data[f];h instanceof B?F(h,b,function(a,b,d){d||(g=!1),c.done(null,e[f]=b)},d):h instanceof D?E(h,b.query,function(a,b,d){d||(g=!1),c.done(null,e[f]=b)},d):c.done(null,e[f]=h)}),h["finally"](function(a){c(a,e,g)})};d?g(null,!0):a._get(f,g)},F=function(a,b,c,d){var e=[],f=b.range;if(f||(f=new x(0,a.length)),!f.length)return c(null,e,!0);var g=f.start,h=f.end,i=function(f,i){for(var j=[],k=0,l=function(a){j.push(function(){var c=this,f=k++;a instanceof D?E(a,b.query,function(a,b,d){d||(i=!1),c.done(null,e[f]=b)},d):a instanceof B?F(a,b,function(a,b,d){d||(i=!1),c.done(null,e[f]=b)},d):c.done(null,e[f]=a)})},m=g;h>m;m++)l(a[m],m);t(j)["finally"](function(a){c(a,e,i)})};d?i(null,!0):a._get([f],i)},G={values:[],keys:[]},H={values:[],keys:[]},I=function(a,b){var c,d=a.uri;if(d){var e=C[d];if(e)c=e;else{var f;n(G.keys,function(a,b){return d.match(a)?!(f=G.values[b]):void 0}),c=C[d]=f?new f(d):new D(d),n(H.keys,function(a,b){d.match(a)&&H.values[b].call(c,c)})}}else c=new D;return c._update(a,b)},J=function(a,b){var c=new B;return c._update(a,b)},K=function(a){switch(a||(a={}),z(a)){case"list":return J(a);case"string":return I({uri:a});case"object":return I(a);case"live":return a}return null};K.register=function(a,b){if(1===arguments.length)if(b=a,a=b.matches,b.register)b.register();else if("Object"===h(b))return i(b,function(a){K.register(a)}),this;return b.prototype instanceof D?(G.keys.unshift(a),G.values.unshift(b)):"Function"===h(b)&&(H.keys.push(a),H.values.push(b)),this};var L={keys:[],values:[]};K.subscribe=function(a,b,c){a.matches&&(a=a.matches);var d,e=a.toString(),f=L.keys,h=L.values;return n(f,function(a,b){return a.toString()===e?!(d=h[b]):void 0}),d||(f.push(a),h.push(d=new g)),d.on(b,c),this},K.unsubscribe=function(a,b,c){a.matches&&(a=a.matches);var d,e=a.toString(),f=L.keys,g=L.values;return n(f,function(a,b){return a.toString()===e?!(d=g[b]):void 0}),d&&d.off(b,c),this},K["delete"]=function(a){delete C[a]};var M=K.ASYNC=0,N=K.SYNC=1,O=K.ASAP=2;K.Model=D,K.List=B,b.exports=K},"./node_modules/spotify-live-models/client.js":function(a,b,c,d){"use strict";function e(a){r("user_metadata",["spotify:user:@"],function(b,c){if(b){if(d.__spotify&&d.__spotify.username){var e=d.__spotify.username;a.update({currentUser:{uri:s.profileURI(e).toURI(),username:e}})}throw b}a.update({currentUser:{uri:s.profileURI(c.username).toURI(),name:c.name,username:c.username}})})}function f(a){r("client_features",[],function(b,c){return b?a(b):void a(null,c.features)})}function g(a){r("session_query",[],function(b,c){if(b)throw b;a.update({session:c}),h(a)})}function h(a){r("session_event_wait",[],function(b,c){if(n){if(b)throw b;"change"===c.type&&a.get("session").update(c.data),h(a)}})}function i(a,b){var c=b.uris,d=b.x,e=b.y,f=b.context&&b.context.uri||null,g=b.index;r("client_show_context_ui",[c,d,e,f,g])}function j(a,b){d===window&&window.top&&window.top.postMessage&&window.top.postMessage({type:"client_show_context_ui",name:"client_show_context_ui",data:b},"*")}function k(a,b){b.indexOf("currentUser")>-1&&e(a),b.indexOf("session")>-1&&g(a)}function l(a,b){if(o){var c={};p(b,function(a){c[a]=!1}),a.update(c)}else o=!0,f(function(c,d){if(c)throw c;a.update(d);var e=[];p(b,function(a){a in d||e.push(a)}),l(a,e)})}function m(a){var b=d.__spotify||{},c=q(b.container_features||{});c.on("wait",function(a){for(var b,d={},e=0;b=a[e];e++)d[b]=!1;c.update(d)});var f=q({});f.on("wait",function(a){l(f,a)}),a.update({features:f,containerFeatures:c}),d.__spotify&&d.__spotify.username&&a.update({currentUser:{username:d.__spotify.username}}),e(a)}var n,o,p=a("./node_modules/spotify-live-models/node_modules/mout/array/forEach.js"),q=a("./node_modules/spotify-live/index.js"),r=a("./node_modules/spotify-live-models/util/bridge.js").request,s=a("./node_modules/spotify-live-models/node_modules/spotify-liburi/src/uri.js"),t=c.matches=/^spotify:client$/;c.register=function(){n||(n=!0,q.subscribe(t,"wait",k),q.subscribe(t,"init",m),q.subscribe(t,"show-context-menu",i),q.subscribe(t,"show-context-menu-v2",j))},c.unregister=function(){n&&(n=!1,q.unsubscribe(t,"wait",k),q.unsubscribe(t,"init",m),q.unsubscribe(t,"show-context-menu",i),q.unsubscribe(t,"show-context-menu-v2",j))}},"./node_modules/spotify-live-models/application.js":function(a,b,c,d){"use strict";function e(){n("application_event_wait",[],function(a,b){if(k){if(a)throw a;var c=m("spotify:application");switch(b.data&&b.data.arguments&&c.update({arguments:b.data.arguments.join(":")}),b.type){case"activate":c.update({active:!0});break;case"deactivate":c.update({active:!1})}e(c)}})}function f(a){if(a.data&&"set_active"===a.data.name){var b=m("spotify:application");b.update({active:a.data.active})}}function g(a,b){l(b,"version")&&a.update({version:"0.0.0"})}function h(a){n("application_query",[],function(b,c){if(b)throw b;var d={};c.uri&&(d.appURI=c.uri),c.arguments&&(d.arguments=c.arguments.join(":")),"active"in c&&(d.active=c.active),a.update(d)})}function i(a,b){n("application_open_uri",[b.uri])}function j(a,b){a.get("appURI",function(a,c){if(a)throw a;n("application_open_uri",[b.uri,c])})}var k,l=a("./node_modules/spotify-live-models/node_modules/mout/array/contains.js"),m=a("./node_modules/spotify-live/index.js"),n=a("./node_modules/spotify-live-models/util/bridge.js").request,o=c.matches=/^spotify:application$/;c.register=function(){k||(k=!0,m.subscribe(o,"push-history-state",i),m.subscribe(o,"replace-history-state",j),m.subscribe(o,"wait",g),d.addEventListener("message",f),e(),h(m("spotify:application")))},c.unregister=function(){k&&(k=!1,m.unsubscribe(o,"push-history-state",i),m.unsubscribe(o,"replace-history-state",j),m.unsubscribe(o,"wait",g),d.removeEventListener("message",f));
}},"./node_modules/spotify-live/util/range.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/prime/index.js"),f=a("./node_modules/spotify-live/node_modules/mout/array/map.js"),g=a("./node_modules/spotify-live/node_modules/mout/array/slice.js"),h=e({constructor:function(a,b){this.update(a,b)},update:function(a,b){if(null!=a&&(this.start=a),null!=b&&(this.end=b),null==this.start||null==this.end)throw new Error("invalid range");if(this.start>this.end)throw new Error("invalid range");return this.length=this.end-this.start,this},copy:function(){return new h(this.start,this.end)},above:function(a){return a?this.start>=a.end:!1},below:function(a){return a?this.end<=a.start:!1},adjacent:function(a){return a?this.end===a.start||this.start===a.end:!1},intersects:function(a){return a?!this.above(a)&&!this.below(a):!1},contains:function(a){return a?this.start<=a.start&&this.end>=a.end:!1},contained:function(a){var b;if(b=a instanceof h?arguments:a,!b)return!1;for(var c=0;a=b[c];c++)if(a.start<=this.start&&a.end>=this.end)return!0;return!1},fits:function(a,b){return a||b?a?b?this.start>=a.end&&this.end<=b.start:this.start>=a.end:this.end<=b.start:!0},between:function(a,b){return a||b?a?b?this.end>a.end&&this.start<b.start?new h(Math.max(a.end,this.start),Math.min(b.start,this.end)):null:this.end<=a.end?null:new h(Math.max(a.end,this.start),this.end):this.start>=b.start?null:new h(this.start,Math.min(this.end,b.start)):this.copy()},intersection:function(a){var b,c=[];b=a instanceof h?arguments:a;for(var d=0;d<b.length;d++){var e=b[d];if(this.below(e))break;e.intersects(this)&&c.push(new h(Math.max(this.start,e.start),Math.min(this.end,e.end)))}return c},subtract:function(a){var b,c=[];b=a instanceof h?arguments:a;for(var d=-1;d<b.length;d++){var e=b[d],f=b[d+1],g=this.between(e,f);g&&c.push(g)}return c},extract:function(a){for(var b=a instanceof h?g(arguments):a.slice(),c=0;c<b.length;c++){var d=b[c-1],e=b[c],f=null;if(this.below(e))f=new h(e.start-this.length,e.end-this.length);else if(this.intersects(e)){var i=e.subtract(this);2===i.length?f=new h(i[0].start,i[1].end-this.length):1===i.length?e.end>this.end?f=new h(i[0].start-this.length,i[0].end-this.length):this.start>e.start&&(f=new h(i[0].start,i[0].end)):b.splice(c--,1)}else b.splice(c,1,e.copy());f&&(d&&d.end===f.start?b.splice(c-- -1,2,new h(d.start,f.end)):b.splice(c,1,f))}return b},insert:function(a){for(var b=a instanceof h?g(arguments):a.slice(),c=0;c<b.length;c++){var d=b[c];this.start>=d.end?b.splice(c,1,d.copy()):this.start>d.start&&this.start<d.end?b.splice(c,1,new h(d.start,this.start),new h(this.start,d.end)):b.splice(c,1,new h(d.start+this.length,d.end+this.length))}return this.merge(b)},merge:function(a){var b;if(b=a instanceof h?arguments:a,b=f(b,function(a){return a.copy()}),!b.length)return[this.copy()];for(var c=-1,d=b.length;d>c;c++){var e=b[c],g=b[c+1],i=this.between(e,g);i&&(!e&&g?i.end===g.start?g.update(i.start,g.end):(c++,b.unshift(i)):e&&g?e.end===i.start&&i.end===g.start?(e.update(e.start,g.end),b.splice(c--+1,1)):e.end===i.start?e.update(e.start,i.end):i.end===g.start?g.update(i.start,g.end):b.splice(c+1,0,i):e&&!g&&(e.end===i.start?e.update(e.start,i.end):(c++,b.push(i))))}return b},remove:function(a){var b;b=a instanceof h?arguments:a;for(var c=[],d=0;d<b.length;d++){var e=b[d].subtract(this);e.length&&c.push.apply(c,e)}return c},toIndices:function(){for(var a=[],b=this.start;b<this.end;b++)a.push(b);return a},toString:function(){return[this.start,this.end]+""}});h.fromString=function(a){var b=a.split(",");return new h(+b[0],+b[1])},h.fromIndices=function(a){a.sort(function(a,b){return a>b?1:-1});for(var b,c,d=[],e=0;e<a.length;e++){for(b=a[e],c=b;a[e+1]-a[e]===1;)c=a[e+1],e++;d.push(new h(b,c+1))}return d};var c=function(a,b){return new h(a,b)};b.exports=c,c.Range=h,c.fromIndices=h.fromIndices,c.fromString=h.fromString},"./node_modules/spotify-live/util/parser.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/util/range.js"),f=function(a){for(var b=[],c="(",d=")",g="[",h="]",i=" ",j=",",k=0,l=0,m=0,n=[],o=[],p="",q=0,r=0,s=0,t=0;t<a.length+1;t++){var u=a.charAt(t);if(!m)if(q){if(u===h){s--;var v=a.substring(q+1,t);o.push({key:p,range:e.fromString(v)}),q=0,p=""}}else/\w/.exec(u)?p+=u:!p||u&&u!==i&&u!==c&&u!==j&&u!==g||(u===g?(s++,q=t):(o.push({key:p}),p=""));if(u===c?(r++,m++||(k=t+1)):u===d&&(r--,0===--m&&(l=t,n[o.length-1]=a.substring(k,l))),-1===r||-1===s)throw new Error("query syntax error")}if(0!==r||0!==s)throw new Error("query syntax error");for(var t=0;t<o.length;t++){var w=n[t],x=o[t],y={key:x.key};w&&(y.query=f(w)),x.range&&(y.range=x.range),b.push(y)}return b};b.exports=f},"./node_modules/spotify-live-models/util/bridge.js":function(a,b,c,d){var e=a("./node_modules/quickstart-spotify/spotify-api.js").SP,f=function(a,b,c){e.request(a,b||[],null,function(a){c&&c(null,a)},function(d){var e=JSON.stringify(b),f=" (bridge message: '"+a+"', args: "+e+")",g=d.message+f,h=new Error(g);h.name=d.error,c&&c(h)})};c.request=f},"./node_modules/spotify-live/node_modules/finally/index.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/prime/index.js"),f=a("./node_modules/spotify-live/node_modules/mout/lang/kindOf.js"),g=a("./node_modules/spotify-live/node_modules/mout/array/map.js"),h=a("./node_modules/spotify-live/node_modules/mout/array/slice.js"),i=a("./node_modules/spotify-live/node_modules/mout/array/forEach.js"),j=a("./node_modules/spotify-live/node_modules/mout/array/reduce.js"),k=a("./node_modules/spotify-live/node_modules/mout/collection/forEach.js"),l=a("./node_modules/spotify-live/node_modules/mout/collection/map.js"),m=Array.prototype.push,n=e({constructor:function(){this._seq=[]},then:function(){return this._push(this._callbacks(arguments)),this},_parallel:function(a,b){var c=this;return function(){var d=new o(c,c._index++);c._controls.push(d),a.apply(d,b?b.concat(h(arguments)):arguments)}},_push:function(a,b){a.length&&this._seq.push(g(a,function(a){return this._parallel(a,b)},this))},_callbacks:function(a){return j(a,function(a,b){return"Array"===f(b)?m.apply(a,b):a.push(b),a},[])},sequential:function(a){var b=this._callbacks(h(arguments,1));return k(a,function(a,c){this._push(b,[a,c])},this),this},parallel:function(a,b){var c=l(a,function(a,c){return this._parallel(b,[a,c])},this);return c.length&&this._seq.push(c),this},"finally":function(){return this.then.apply(this,arguments),this._continue.call(this),this},run:function(){return this._continue.apply(this,arguments),this},_break:function(){this._seq.splice(0,this._seq.length-1),this._continue.apply(this,arguments)},_spread:function(a,b){var c=this._next();c&&(c=c[0])&&(b&&b.length||(b=[void 0]),this._length=b.length,i(b,function(b){c(a,b)}))},_continue:function(){var a=this._next();if(a){this._length=a.length;var b=arguments;i(a,function(a){a.apply(null,b)})}},_next:function(){var a=this._seq.shift();if(a)return this._controls&&i(this._controls,function(a){a._kill()}),this._arguments=[],this._errors=[],this._controls=[],this._index=0,a},_done:function(a,b,c){if(this._arguments[a]=c,b&&this._errors.push(b),--this._length)this._controls[a]._kill();else{var d=null;1===this._errors.length?d=this._errors[0]:this._errors.length&&(d=new Error(g(this._errors,function(a){return a.message}).join("\n"))),this._continue.apply(this,[d].concat(this._arguments))}}}),o=function(a,b){var c;this._kill=function(){c=!0},this["break"]=function(){c||a._break.apply(a,arguments)},this["continue"]=function(){c||a._continue.apply(a,arguments)},this.spread=function(b,d){c||a._spread(b,d)};this.done=function(d,e){c||a._done.call(a,b,d,e)}};b.exports=function(){var a=new n;return a.then.apply(a,arguments),a}},"./node_modules/spotify-live/node_modules/prime/defer.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/mout/lang/kindOf.js"),f=a("./node_modules/spotify-live/node_modules/mout/time/now.js"),g=a("./node_modules/spotify-live/node_modules/mout/array/forEach.js"),h=a("./node_modules/spotify-live/node_modules/mout/array/indexOf.js"),i={timeout:{},frame:[],immediate:[]},j=function(a,b,c,d){var e=function(){k(a)};a.length||d(e);var f={callback:b,context:c};return a.push(f),function(){var b=h(a,f);b>-1&&a.splice(b,1)}},k=function(a){var b=f();g(a.splice(0),function(a){a.callback.call(a.context,b)})},l=function(a,b,c){return"Number"===e(b)?l.timeout(a,b,c):l.immediate(a,b)};d.process&&process.nextTick?l.immediate=function(a,b){return j(i.immediate,a,b,process.nextTick)}:d.setImmediate?l.immediate=function(a,b){return j(i.immediate,a,b,setImmediate)}:d.postMessage&&d.addEventListener?(addEventListener("message",function(a){a.source===d&&"@deferred"===a.data&&(a.stopPropagation(),k(i.immediate))},!0),l.immediate=function(a,b){return j(i.immediate,a,b,function(){postMessage("@deferred","*")})}):l.immediate=function(a,b){return j(i.immediate,a,b,function(a){setTimeout(a,0)})};var m=d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(a){setTimeout(a,1e3/60)};l.frame=function(a,b){return j(i.frame,a,b,m)};var n;l.timeout=function(a,b,c){var d=i.timeout;return n||(n=l.immediate(function(){n=null,i.timeout={}})),j(d[b]||(d[b]=[]),a,c,function(a){setTimeout(a,b)})},b.exports=l},"./node_modules/spotify-live/node_modules/prime/emitter.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/mout/array/indexOf.js"),f=a("./node_modules/spotify-live/node_modules/mout/array/forEach.js"),g=a("./node_modules/spotify-live/node_modules/prime/index.js"),h=a("./node_modules/spotify-live/node_modules/prime/defer.js"),i=Array.prototype.slice,j=g({on:function(a,b){var c=this._listeners||(this._listeners={}),d=c[a]||(c[a]=[]);return-1===e(d,b)&&d.push(b),this},off:function(a,b){var c,d=this._listeners;if(d&&(c=d[a])){var f=e(c,b);f>-1&&c.splice(f,1),c.length||delete d[a];for(var g in d)return this;delete this._listeners}return this},emit:function(a){var b=this,c=i.call(arguments,1),d=function(){var d,e=b._listeners;e&&(d=e[a])&&f(d.slice(0),function(a){return a.apply(b,c)})};return c[c.length-1]===j.EMIT_SYNC?(c.pop(),d()):h(d),this}});j.EMIT_SYNC={},b.exports=j},"./node_modules/spotify-live/node_modules/prime/index.js":function(a,b,c,d){"use strict";var e=a("./node_modules/spotify-live/node_modules/mout/object/hasOwn.js"),f=a("./node_modules/spotify-live/node_modules/mout/object/mixIn.js"),g=a("./node_modules/spotify-live/node_modules/mout/lang/createObject.js"),h=a("./node_modules/spotify-live/node_modules/mout/lang/kindOf.js"),i=!0;try{Object.defineProperty({},"~",{}),Object.getOwnPropertyDescriptor({},"~")}catch(j){i=!1}var k=!{valueOf:0}.propertyIsEnumerable("valueOf"),l=["toString","valueOf"],m=/^constructor|inherits|mixin$/,n=function(a){var b=this.prototype;for(var c in a)if(!c.match(m)){if(i){var d=Object.getOwnPropertyDescriptor(a,c);if(d){Object.defineProperty(b,c,d);continue}}b[c]=a[c]}if(k)for(var e=0;c=l[e];e++){var f=a[c];f!==Object.prototype[c]&&(b[c]=f)}return this},o=function(a){"Function"===h(a)&&(a={constructor:a});var b=a.inherits,c=e(a,"constructor")?a.constructor:b?function(){return b.apply(this,arguments)}:function(){};if(b){f(c,b);var d=b.prototype,i=c.prototype=g(d);c.parent=d,i.constructor=c}c.implement||(c.implement=n);var j=a.mixin;if(j){"Array"!==h(j)&&(j=[j]);for(var k=0;k<j.length;k++)c.implement(g(j[k].prototype))}return c.implement(a)};b.exports=o},"./node_modules/spotify-cosmos-api/index.js":function(a,b,c,d){"use strict";var e=d.window||{},f=d.process,g=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/index.js"),h=a("./node_modules/spotify-cosmos-api/scripts/resolver.js").Resolver,i=null,j=null,k=e._getSpotifyModule&&"function"==typeof e._getSpotifyModule&&e._getSpotifyModule("bridge"),l=/(node)|(grunt)|(iojs)(\.exe)*$/,m=f&&f.title&&l.test(f.argv[0]);m||(k?(i=a("./node_modules/spotify-cosmos-api/env/bootstrap.native.js").NativeResolver,j=new i(k)):(i=a("./node_modules/spotify-cosmos-api/env/bootstrap.web.js").WebResolver,j=new i)),c.Resolver=h,c.Action=g.request.Action,c.Request=g.request.Request,c.Response=g.response.Response,c.resolver=j?new h(j):null},"./node_modules/spotify-live/node_modules/mout/lang/kindOf.js":function(a,b,c,d){function e(a){return null===a?"Null":a===f?"Undefined":g.exec(h.call(a))[1]}var f,g=/^\[object (.*)\]$/,h=Object.prototype.toString;b.exports=e},"./node_modules/spotify-live/node_modules/mout/lang/isPlainObject.js":function(a,b,c,d){function e(a){return!!a&&"object"==typeof a&&a.constructor===Object}b.exports=e},"./node_modules/spotify-live/node_modules/mout/object/forIn.js":function(a,b,c,d){function e(){i=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],h=!0;for(var a in{toString:null})h=!1}function f(a,b,c){var d,f=0;null==h&&e();for(d in a)if(g(b,a,d,c)===!1)break;if(h)for(var k=a.constructor,l=!!k&&a===k.prototype;(d=i[f++])&&("constructor"===d&&(l||!j(a,d))||a[d]===Object.prototype[d]||g(b,a,d,c)!==!1););}function g(a,b,c,d){return a.call(d,b[c],c,b)}var h,i,j=a("./node_modules/spotify-live/node_modules/mout/object/hasOwn.js");b.exports=f},"./node_modules/spotify-live/node_modules/mout/object/filter.js":function(a,b,c,d){function e(a,b,c){b=g(b,c);var d={};return f(a,function(a,c,e){b(a,c,e)&&(d[c]=a)}),d}var f=a("./node_modules/spotify-live/node_modules/mout/object/forOwn.js"),g=a("./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/object/mixIn.js":function(a,b,c,d){function e(a,b){for(var c,d=0,e=arguments.length;++d<e;)c=arguments[d],null!=c&&g(c,f,a);return a}function f(a,b){this[b]=a}var g=a("./node_modules/spotify-live/node_modules/mout/object/forOwn.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/difference.js":function(a,b,c,d){function e(a){var b=j(arguments,1),c=g(f(a),function(a){return!h(b,function(b){return i(b,a)})});return c}var f=a("./node_modules/spotify-live/node_modules/mout/array/unique.js"),g=a("./node_modules/spotify-live/node_modules/mout/array/filter.js"),h=a("./node_modules/spotify-live/node_modules/mout/array/some.js"),i=a("./node_modules/spotify-live/node_modules/mout/array/contains.js"),j=a("./node_modules/spotify-live/node_modules/mout/array/slice.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/forEach.js":function(a,b,c,d){function e(a,b,c){if(null!=a)for(var d=-1,e=a.length;++d<e&&b.call(c,a[d],d,a)!==!1;);}b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/combine.js":function(a,b,c,d){function e(a,b){if(null==b)return a;for(var c=-1,d=b.length;++c<d;)-1===f(a,b[c])&&a.push(b[c]);return a}var f=a("./node_modules/spotify-live/node_modules/mout/array/indexOf.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/append.js":function(a,b,c,d){function e(a,b){if(null==b)return a;for(var c=a.length,d=-1,e=b.length;++d<e;)a[c+d]=b[d];return a}b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/remove.js":function(a,b,c,d){function e(a,b){var c=f(a,b);-1!==c&&a.splice(c,1)}var f=a("./node_modules/spotify-live/node_modules/mout/array/indexOf.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/filter.js":function(a,b,c,d){function e(a,b,c){b=f(b,c);var d=[];if(null==a)return d;for(var e,g=-1,h=a.length;++g<h;)e=a[g],b(e,g,a)&&d.push(e);return d}var f=a("./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/map.js":function(a,b,c,d){function e(a,b,c){b=f(b,c);var d=[];if(null==a)return d;for(var e=-1,g=a.length;++e<g;)d[e]=b(a[e],e,a);return d}var f=a("./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js");b.exports=e},"./node_modules/spotify-live-models/node_modules/mout/array/forEach.js":function(a,b,c,d){function e(a,b,c){if(null!=a)for(var d=-1,e=a.length;++d<e&&b.call(c,a[d],d,a)!==!1;);}b.exports=e},"./node_modules/spotify-live-models/node_modules/mout/array/contains.js":function(a,b,c,d){function e(a,b){return-1!==f(a,b)}var f=a("./node_modules/spotify-live-models/node_modules/mout/array/indexOf.js");b.exports=e},"./node_modules/spotify-live-models/node_modules/spotify-liburi/src/uri.js":function(a,b,c,d){"use strict";function e(a,b){this.type=a;for(var c in b)"function"!=typeof b[c]&&(this[c]=b[c])}var f=a("./node_modules/spotify-live-models/node_modules/spotify-liburi/node_modules/spotify-crypto/src/base62.js"),g="spotify:",h="http://play.spotify.com/",i="https://play.spotify.com/",j="http://open.spotify.com/",k="https://open.spotify.com/",l=new TypeError("Invalid Spotify URI!"),m=(new TypeError("Not implemented!"),{URI:0,URL:1}),n=function(a){var b,c,d,e=a.split("#");if(e.length>1&&(a=e.shift(),d=e.pop()),0===a.indexOf(g))b=a.slice(g.length).split(":"),c=m.URI;else{if(a=a.split("?")[0],0===a.indexOf(h))b=a.slice(h.length).split("/");else if(0===a.indexOf(i))b=a.slice(i.length).split("/");else if(0===a.indexOf(j))b=a.slice(j.length).split("/");else{if(0!==a.indexOf(k))throw l;b=a.slice(k.length).split("/")}c=m.URL}return d&&b.push(d),{format:c,components:b}},o=function(a,b){return a=encodeURIComponent(a),b===m.URI&&(a=a.replace(/%20/g,"+")),a=a.replace(/[!'()]/g,escape),a=a.replace(/\*/g,"%2A")},p=function(a,b){var c=b==m.URI?a.replace(/\+/g,"%20"):a;return decodeURIComponent(c)},q=function(a,b){var c;a.id&&(c=a._base62Id);var d,f,g;switch(a.type){case e.Type.ALBUM:return d=[e.Type.ALBUM,c],a.disc&&d.push(a.disc),d;case e.Type.AD:return[e.Type.AD,a._base62Id];case e.Type.ARTIST:return[e.Type.ARTIST,c];case e.Type.ARTIST_TOPLIST:return[e.Type.ARTIST,c,e.Type.TOP,a.toplist];case e.Type.SEARCH:return[e.Type.SEARCH,o(a.query,b)];case e.Type.TRACK:return a.anchor&&(c+="#"+a.anchor),[e.Type.TRACK,c];case e.Type.TRACKSET:var h=[];for(f=0,g=a.tracks.length;g>f;f++)h.push(a.tracks[f]._base62Id);return h=[h.join(",")],null!==a.index&&h.push("#",a.index),[e.Type.TRACKSET,o(a.name)].concat(h);case e.Type.FACEBOOK:return[e.Type.USER,e.Type.FACEBOOK,a.uid];case e.Type.AUDIO_FILE:return[e.Type.AUDIO_FILE,a.extension,a._base62Id];case e.Type.FOLDER:return[e.Type.USER,o(a.username,b),e.Type.FOLDER,a._base62Id];case e.Type.FOLLOWERS:return[e.Type.USER,o(a.username,b),e.Type.FOLLOWERS];case e.Type.FOLLOWING:return[e.Type.USER,o(a.username,b),e.Type.FOLLOWING];case e.Type.PLAYLIST:return[e.Type.USER,o(a.username,b),e.Type.PLAYLIST,c];case e.Type.STARRED:return[e.Type.USER,o(a.username,b),e.Type.STARRED];case e.Type.TEMP_PLAYLIST:return[e.Type.TEMP_PLAYLIST,a.origin,a.data];case e.Type.CONTEXT_GROUP:return[e.Type.CONTEXT_GROUP,a.origin,a.name];case e.Type.USER_TOPLIST:return[e.Type.USER,o(a.username,b),e.Type.TOP,a.toplist];case e.Type.USER_TOP_TRACKS:return[e.Type.USER,o(a.username,b),e.Type.TOPLIST];case e.Type.TOPLIST:return[e.Type.TOP,a.toplist].concat(a.global?[e.Type.GLOBAL]:["country",a.country]);case e.Type.INBOX:return[e.Type.USER,o(a.username,b),e.Type.INBOX];case e.Type.ROOTLIST:return[e.Type.USER,o(a.username,b),e.Type.ROOTLIST];case e.Type.PUBLISHED_ROOTLIST:return[e.Type.USER,o(a.username,b),e.Type.PUBLISHED_ROOTLIST];case e.Type.COLLECTION_TRACK_LIST:return[e.Type.USER,o(a.username,b),e.Type.COLLECTION_TRACK_LIST,c];case e.Type.PROFILE:return a.args&&a.args.length>0?[e.Type.USER,o(a.username,b)].concat(a.args):[e.Type.USER,o(a.username,b)];case e.Type.LOCAL_ARTIST:return[e.Type.LOCAL,o(a.artist,b)];case e.Type.LOCAL_ALBUM:return[e.Type.LOCAL,o(a.artist,b),o(a.album,b)];case e.Type.LOCAL:return[e.Type.LOCAL,o(a.artist,b),o(a.album,b),o(a.track,b),a.duration];case e.Type.LIBRARY:return[e.Type.USER,o(a.username,b),e.Type.LIBRARY].concat(a.category?[a.category]:[]);case e.Type.IMAGE:return[e.Type.IMAGE,a._base62Id];case e.Type.MOSAIC:return d=a.ids.slice(0),d.unshift(e.Type.MOSAIC),d;case e.Type.RADIO:return[e.Type.RADIO,a.args];case e.Type.SPECIAL:d=[e.Type.SPECIAL];var i=a.args||[];for(f=0,g=i.length;g>f;++f)d.push(o(i[f],b));return d;case e.Type.STATION:d=[e.Type.STATION];var i=a.args||[];for(f=0,g=i.length;g>f;f++)d.push(o(i[f],b));return d;case e.Type.APPLICATION:d=[e.Type.APP,a._base62Id];var i=a.args||[];for(f=0,g=i.length;g>f;++f)d.push(o(i[f],b));return d;case e.Type.COLLECTION_ALBUM:return[e.Type.USER,o(a.username,b),e.Type.COLLECTION,e.Type.ALBUM,c];case e.Type.COLLECTION_MISSING_ALBUM:return[e.Type.USER,o(a.username,b),e.Type.COLLECTION,e.Type.ALBUM,c,"missing"];case e.Type.COLLECTION_ARTIST:return[e.Type.USER,o(a.username,b),e.Type.COLLECTION,e.Type.ARTIST,c];case e.Type.COLLECTION:return[e.Type.USER,o(a.username,b),e.Type.COLLECTION].concat(a.category?[a.category]:[]);case e.Type.EPISODE:return[e.Type.EPISODE,c];default:throw l}},r=function(a,b){var c,d,f,g=0,h=function(){return a[g++]},i=function(){var a=h();if(a.length>22)throw new Error("Invalid ID");return a},j=function(){return a.slice(g)},k=function(){var c=b==m.URI?":":"/";return a.slice(g).join(c)},n=h();switch(n){case e.Type.ALBUM:return e.albumURI(i(),parseInt(h(),10));case e.Type.AD:return e.adURI(h());case e.Type.ARTIST:return c=i(),h()==e.Type.TOP?e.artistToplistURI(c,h()):e.artistURI(c);case e.Type.AUDIO_FILE:return e.audioFileURI(h(),h());case e.Type.TEMP_PLAYLIST:return e.temporaryPlaylistURI(h(),k());case e.Type.SEARCH:return e.searchURI(p(k(),b));case e.Type.TRACK:return e.trackURI(i(),h());case e.Type.TRACKSET:var o=p(h()),q=h(),r=h(),s=parseInt(h(),10);("%23"!==r||isNaN(s))&&(s=null);var t=[];if(q)for(q=p(q).split(","),d=0,f=q.length;f>d;d++){var u=q[d];t.push(e.trackURI(u))}return e.tracksetURI(t,o,s);case e.Type.CONTEXT_GROUP:return e.contextGroupURI(h(),h());case e.Type.TOP:var v=h();return h()==e.Type.GLOBAL?e.toplistURI(v,null,!0):e.toplistURI(v,h(),!1);case e.Type.USER:var w=p(h(),b),x=h();if(w==e.Type.FACEBOOK&&null!=x)return e.facebookURI(parseInt(x,10));if(null!=x)switch(x){case e.Type.PLAYLIST:return e.playlistURI(w,i());case e.Type.FOLDER:return e.folderURI(w,i());case e.Type.COLLECTION_TRACK_LIST:return e.collectionTrackList(w,i());case e.Type.COLLECTION:var y=h();switch(y){case e.Type.ALBUM:return c=i(),"missing"===h()?e.collectionMissingAlbumURI(w,c):e.collectionAlbumURI(w,c);case e.Type.ARTIST:return e.collectionArtistURI(w,i());default:return e.collectionURI(w,y)}case e.Type.STARRED:return e.starredURI(w);case e.Type.FOLLOWERS:return e.followersURI(w);case e.Type.FOLLOWING:return e.followingURI(w);case e.Type.TOP:return e.userToplistURI(w,h());case e.Type.INBOX:return e.inboxURI(w);case e.Type.ROOTLIST:return e.rootlistURI(w);case e.Type.PUBLISHED_ROOTLIST:return e.publishedRootlistURI(w);case e.Type.TOPLIST:return e.userTopTracksURI(w);case e.Type.LIBRARY:return e.libraryURI(w,h())}var z=j();return null!=x&&z.length>0?e.profileURI(w,[x].concat(z)):null!=x?e.profileURI(w,[x]):e.profileURI(w);case e.Type.LOCAL:var A=h(),B=A&&p(A,b),C=h(),D=C&&p(C,b),E=h(),F=E&&p(E,b),G=h(),H=parseInt(G,10);return void 0!==E?e.localURI(B,D,F,H):void 0!==C?e.localAlbumURI(B,D):e.localArtistURI(B);case e.Type.IMAGE:return e.imageURI(i());case e.Type.MOSAIC:return e.mosaicURI(a.slice(g));case e.Type.RADIO:return e.radioURI(k());case e.Type.SPECIAL:var I=j();for(d=0,f=I.length;f>d;++d)I[d]=p(I[d],b);return e.specialURI(I);case e.Type.STATION:return e.stationURI(j());case e.Type.EPISODE:return e.episodeURI(i());default:c=n===e.Type.APP?h():n;var I=j();for(d=0,f=I.length;f>d;++d)I[d]=p(I[d],b);return e.applicationURI(c,I)}throw l};Object.defineProperty(e.prototype,"id",{get:function(){return this._hexId||(this._hexId=this._base62Id?e.idToHex(this._base62Id):void 0),this._hexId},set:function(a){this._base62Id=a?e.hexToId(a):void 0,this._hexId=void 0},enumerable:!0,configurable:!0}),e.prototype.toAppType=function(){if(this.type==e.Type.APPLICATION)return e.applicationURI(this.id,this.args);var a=q(this,m.URL),b=a.shift(),c=a.length;if(c)for(;c--;)a[c]=p(a[c],m.URL);this.type==e.Type.RADIO&&(a=a.shift().split(":"));var d=e.applicationURI(b,a);return d},e.prototype.toRealType=function(){return this.type==e.Type.APPLICATION?r([this.id].concat(this.args),m.URI):new e(null,this)},e.prototype.toURI=function(){return g+q(this,m.URI).join(":")},e.prototype.toString=function(){return this.toURI()},e.prototype.toURLPath=function(a){var b=q(this,m.URL);b[0]===e.Type.APP&&b.shift();var c=b[0]===e.Type.TRACKSET,d=b[0]===e.Type.LOCAL,f=!c&&!d;if(f){for(var g=[],h=0,i=b.length;i>h;h++){var j=b[h];j&&g.push(j)}b=g}var k=b.join("/");return a?"/"+k:k},e.prototype.toPlayURL=function(){return i+this.toURLPath()},e.prototype.toURL=function(){return this.toPlayURL()},e.prototype.toOpenURL=function(){return k+this.toURLPath()},e.prototype.toSecurePlayURL=function(){return this.toPlayURL()},e.prototype.toSecureURL=function(){return this.toPlayURL()},e.prototype.toSecureOpenURL=function(){return this.toOpenURL()},e.prototype.idToByteString=function(){var a=f.toBytes(this._base62Id);for(a=a.map(function(a){return String.fromCharCode(a)}).join("");a.length<16;)a=String.fromCharCode(0)+a;return a},e.Type={EMPTY:"empty",ALBUM:"album",AD:"ad",APP:"app",APPLICATION:"application",ARTIST:"artist",ARTIST_TOPLIST:"artist-toplist",AUDIO_FILE:"audiofile",COLLECTION:"collection",COLLECTION_ALBUM:"collection-album",COLLECTION_MISSING_ALBUM:"collection-missing-album",COLLECTION_ARTIST:"collection-artist",CONTEXT_GROUP:"context-group",EPISODE:"episode",FACEBOOK:"facebook",FOLDER:"folder",FOLLOWERS:"followers",FOLLOWING:"following",GLOBAL:"global",IMAGE:"image",INBOX:"inbox",LOCAL_ARTIST:"local-artist",LOCAL_ALBUM:"local-album",LOCAL:"local",LIBRARY:"library",MOSAIC:"mosaic",PLAYLIST:"playlist",PROFILE:"profile",PUBLISHED_ROOTLIST:"published-rootlist",RADIO:"radio",ROOTLIST:"rootlist",COLLECTION_TRACK_LIST:"collectiontracklist",SEARCH:"search",SPECIAL:"special",STARRED:"starred",STATION:"station",TEMP_PLAYLIST:"temp-playlist",TOP:"top",TOPLIST:"toplist",TRACK:"track",TRACKSET:"trackset",USER:"user",USER_TOPLIST:"user-toplist",USER_TOP_TRACKS:"user-top-tracks",USET_TOP_TRACKS:"user-top-tracks"},e.fromString=function(a){var b=n(a);return r(b.components,b.format)},e.from=function(a){try{return a instanceof e?a:"object"==typeof a&&a.type?new e(null,a):e.fromString(a.toString())}catch(b){return null}},e.fromByteString=function(a,b,c){for(var d=[],g=0;g<b.length;g++)d.push(b.charCodeAt(g));var h=f.fromBytes(d,22),i=c||{};return i.id=h,new e(a,i)},e.clone=function(a){return a instanceof e?new e(null,a):null},e.getCanonical=function(a){return this.getCanonical(a)},e.getCanonicalUsername=function(a){return o(a,m.URI)},e.getDisplayUsername=function(a){return p(a,m.URI)},e.idToHex=function(a){return 22==a.length?f.toHex(a,32):a},e.hexToId=function(a){return 32==a.length?f.fromHex(a,22):a},e.emptyURI=function(){return new e(e.Type.EMPTY,{})},e.albumURI=function(a,b){return new e(e.Type.ALBUM,{id:a,disc:b})},e.adURI=function(a){return new e(e.Type.AD,{id:a})},e.audioFileURI=function(a,b){return new e(e.Type.AUDIO_FILE,{id:b,extension:a})},e.artistURI=function(a){return new e(e.Type.ARTIST,{id:a})},e.artistToplistURI=function(a,b){return new e(e.Type.ARTIST_TOPLIST,{id:a,toplist:b})},e.searchURI=function(a){return new e(e.Type.SEARCH,{query:a})},e.trackURI=function(a,b){return new e(e.Type.TRACK,{id:a,anchor:b})},e.tracksetURI=function(a,b,c){return new e(e.Type.TRACKSET,{tracks:a,name:b||"",index:isNaN(c)?null:c})},e.facebookURI=function(a){return new e(e.Type.FACEBOOK,{uid:a})},e.followersURI=function(a){return new e(e.Type.FOLLOWERS,{username:a})},e.followingURI=function(a){return new e(e.Type.FOLLOWING,{username:a})},e.playlistURI=function(a,b){return new e(e.Type.PLAYLIST,{username:a,id:b})},e.folderURI=function(a,b){return new e(e.Type.FOLDER,{username:a,id:b})},e.collectionTrackList=function(a,b){return new e(e.Type.COLLECTION_TRACK_LIST,{username:a,id:b})},e.starredURI=function(a){return new e(e.Type.STARRED,{username:a})},e.userToplistURI=function(a,b){return new e(e.Type.USER_TOPLIST,{username:a,toplist:b})},e.userTopTracksURI=function(a){return new e(e.Type.USER_TOP_TRACKS,{username:a})},e.toplistURI=function(a,b,c){return new e(e.Type.TOPLIST,{toplist:a,country:b,global:!!c})},e.inboxURI=function(a){return new e(e.Type.INBOX,{username:a})},e.rootlistURI=function(a){return new e(e.Type.ROOTLIST,{username:a})},e.publishedRootlistURI=function(a){return new e(e.Type.PUBLISHED_ROOTLIST,{username:a})},e.localArtistURI=function(a){return new e(e.Type.LOCAL_ARTIST,{artist:a})},e.localAlbumURI=function(a,b){return new e(e.Type.LOCAL_ALBUM,{artist:a,album:b})},e.localURI=function(a,b,c,d){return new e(e.Type.LOCAL,{artist:a,album:b,track:c,duration:d})},e.libraryURI=function(a,b){return new e(e.Type.LIBRARY,{username:a,category:b})},e.collectionURI=function(a,b){return new e(e.Type.COLLECTION,{username:a,category:b})},e.temporaryPlaylistURI=function(a,b){return new e(e.Type.TEMP_PLAYLIST,{origin:a,data:b})},e.contextGroupURI=function(a,b){return new e(e.Type.CONTEXT_GROUP,{origin:a,name:b})},e.profileURI=function(a,b){return new e(e.Type.PROFILE,{username:a,args:b})},e.imageURI=function(a){return new e(e.Type.IMAGE,{id:a})},e.mosaicURI=function(a){return new e(e.Type.MOSAIC,{ids:a})},e.radioURI=function(a){return a="undefined"==typeof a?"":a,new e(e.Type.RADIO,{args:a})},e.specialURI=function(a){return a="undefined"==typeof a?[]:a,new e(e.Type.SPECIAL,{args:a})},e.stationURI=function(a){return a="undefined"==typeof a?[]:a,new e(e.Type.STATION,{args:a})},e.applicationURI=function(a,b){return b="undefined"==typeof b?[]:b,new e(e.Type.APPLICATION,{id:a,args:b})},e.collectionAlbumURI=function(a,b){return new e(e.Type.COLLECTION_ALBUM,{username:a,id:b})},e.collectionMissingAlbumURI=function(a,b){return new e(e.Type.COLLECTION_MISSING_ALBUM,{username:a,id:b})},e.collectionArtistURI=function(a,b){return new e(e.Type.COLLECTION_ARTIST,{username:a,id:b})},e.episodeURI=function(a){return new e(e.Type.EPISODE,{id:a})},b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/slice.js":function(a,b,c,d){function e(a,b,c){var d=a.length;b=null==b?0:0>b?Math.max(d+b,0):Math.min(b,d),c=null==c?d:0>c?Math.max(d+c,0):Math.min(c,d);for(var e=[];c>b;)e.push(a[b++]);return e}b.exports=e},"./node_modules/bluebird/js/browser/bluebird.js":function(a,b,c,d){!function(a){if("object"==typeof c&&"undefined"!=typeof b)b.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof d?e=d:"undefined"!=typeof self&&(e=self),e.Promise=a()}}(function(){var a,b,c;return function e(a,b,c){function d(g,h){if(!b[g]){if(!a[g]){var i="function"==typeof _dereq_&&_dereq_;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=b[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return d(c?c:b)},k,k.exports,e,a,b,c)}return b[g].exports}for(var f="function"==typeof _dereq_&&_dereq_,g=0;g<c.length;g++)d(c[g]);return d}({1:[function(a,b,c){"use strict";b.exports=function(a){function b(a){var b=new c(a),d=b.promise();return b.setHowMany(1),b.setUnwrap(),b.init(),d}var c=a._SomePromiseArray;a.any=function(a){return b(a)},a.prototype.any=function(){return b(this)}}},{}],2:[function(a,b,c){"use strict";function d(){this._isTickUsed=!1,this._lateQueue=new k(16),this._normalQueue=new k(16),this._trampolineEnabled=!0;var a=this;this.drainQueues=function(){a._drainQueues()},this._schedule=j.isStatic?j(this.drainQueues):j}function e(a,b,c){this._lateQueue.push(a,b,c),this._queueTick()}function f(a,b,c){this._normalQueue.push(a,b,c),this._queueTick()}function g(a){this._normalQueue._pushOne(a),this._queueTick()}var h;try{throw new Error}catch(i){h=i}var j=a("./schedule.js"),k=a("./queue.js"),l=a("./util.js");d.prototype.disableTrampolineIfNecessary=function(){l.hasDevTools&&(this._trampolineEnabled=!1)},d.prototype.enableTrampoline=function(){this._trampolineEnabled||(this._trampolineEnabled=!0,
this._schedule=function(a){setTimeout(a,0)})},d.prototype.haveItemsQueued=function(){return this._normalQueue.length()>0},d.prototype.throwLater=function(a,b){if(1===arguments.length&&(b=a,a=function(){throw b}),"undefined"!=typeof setTimeout)setTimeout(function(){a(b)},0);else try{this._schedule(function(){a(b)})}catch(c){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")}},l.hasDevTools?(j.isStatic&&(j=function(a){setTimeout(a,0)}),d.prototype.invokeLater=function(a,b,c){this._trampolineEnabled?e.call(this,a,b,c):this._schedule(function(){setTimeout(function(){a.call(b,c)},100)})},d.prototype.invoke=function(a,b,c){this._trampolineEnabled?f.call(this,a,b,c):this._schedule(function(){a.call(b,c)})},d.prototype.settlePromises=function(a){this._trampolineEnabled?g.call(this,a):this._schedule(function(){a._settlePromises()})}):(d.prototype.invokeLater=e,d.prototype.invoke=f,d.prototype.settlePromises=g),d.prototype.invokeFirst=function(a,b,c){this._normalQueue.unshift(a,b,c),this._queueTick()},d.prototype._drainQueue=function(a){for(;a.length()>0;){var b=a.shift();if("function"==typeof b){var c=a.shift(),d=a.shift();b.call(c,d)}else b._settlePromises()}},d.prototype._drainQueues=function(){this._drainQueue(this._normalQueue),this._reset(),this._drainQueue(this._lateQueue)},d.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))},d.prototype._reset=function(){this._isTickUsed=!1},b.exports=new d,b.exports.firstLineError=h},{"./queue.js":28,"./schedule.js":31,"./util.js":38}],3:[function(a,b,c){"use strict";b.exports=function(a,b,c){var d=function(a,b){this._reject(b)},e=function(a,b){b.promiseRejectionQueued=!0,b.bindingPromise._then(d,d,null,this,a)},f=function(a,b){this._isPending()&&this._resolveCallback(b.target)},g=function(a,b){b.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(d){var h=c(d),i=new a(b);i._propagateFrom(this,1);var j=this._target();if(i._setBoundTo(h),h instanceof a){var k={promiseRejectionQueued:!1,promise:i,target:j,bindingPromise:h};j._then(b,e,i._progress,i,k),h._then(f,g,i._progress,i,k)}else i._resolveCallback(j);return i},a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField=131072|this._bitField,this._boundTo=a):this._bitField=-131073&this._bitField},a.prototype._isBound=function(){return 131072===(131072&this._bitField)},a.bind=function(d,e){var f=c(d),g=new a(b);return g._setBoundTo(f),f instanceof a?f._then(function(){g._resolveCallback(e)},g._reject,g._progress,g,null):g._resolveCallback(e),g}}},{}],4:[function(a,b,c){"use strict";function d(){try{Promise===f&&(Promise=e)}catch(a){}return f}var e;"undefined"!=typeof Promise&&(e=Promise);var f=a("./promise.js")();f.noConflict=d,b.exports=f},{"./promise.js":23}],5:[function(a,b,c){"use strict";var d=Object.create;if(d){var e=d(null),f=d(null);e[" size"]=f[" size"]=0}b.exports=function(b){function c(a,c){var d;if(null!=a&&(d=a[c]),"function"!=typeof d){var e="Object "+h.classString(a)+" has no method '"+h.toString(c)+"'";throw new b.TypeError(e)}return d}function d(a){var b=this.pop(),d=c(a,b);return d.apply(a,this)}function e(a){return a[this]}function f(a){var b=+this;return 0>b&&(b=Math.max(0,b+a.length)),a[b]}var g,h=a("./util.js"),i=h.canEvaluate;h.isIdentifier;b.prototype.call=function(a){for(var b=arguments.length,c=new Array(b-1),e=1;b>e;++e)c[e-1]=arguments[e];return c.push(a),this._then(d,void 0,void 0,c,void 0)},b.prototype.get=function(a){var b,c="number"==typeof a;if(c)b=f;else if(i){var d=g(a);b=null!==d?d:e}else b=e;return this._then(b,void 0,void 0,a,void 0)}}},{"./util.js":38}],6:[function(a,b,c){"use strict";b.exports=function(b){var c=a("./errors.js"),d=a("./async.js"),e=c.CancellationError;b.prototype._cancel=function(a){if(!this.isCancellable())return this;for(var b,c=this;void 0!==(b=c._cancellationParent)&&b.isCancellable();)c=b;this._unsetCancellable(),c._target()._rejectCallback(a,!1,!0)},b.prototype.cancel=function(a){return this.isCancellable()?(void 0===a&&(a=new e),d.invokeLater(this._cancel,this,a),this):this},b.prototype.cancellable=function(){return this._cancellable()?this:(d.enableTrampoline(),this._setCancellable(),this._cancellationParent=void 0,this)},b.prototype.uncancellable=function(){var a=this.then();return a._unsetCancellable(),a},b.prototype.fork=function(a,b,c){var d=this._then(a,b,c,void 0,void 0);return d._setCancellable(),d._cancellationParent=void 0,d}}},{"./async.js":2,"./errors.js":13}],7:[function(a,b,c){"use strict";b.exports=function(){function b(a){this._parent=a;var c=this._length=1+(void 0===a?0:a._length);u(this,b),c>32&&this.uncycle()}function c(a,b){for(var c=0;c<b.length-1;++c)b[c].push("From previous event:"),b[c]=b[c].join("\n");return c<b.length&&(b[c]=b[c].join("\n")),a+"\n"+b.join("\n")}function d(a){for(var b=0;b<a.length;++b)(0===a[b].length||b+1<a.length&&a[b][0]===a[b+1][0])&&(a.splice(b,1),b--)}function e(a){for(var b=a[0],c=1;c<a.length;++c){for(var d=a[c],e=b.length-1,f=b[e],g=-1,h=d.length-1;h>=0;--h)if(d[h]===f){g=h;break}for(var h=g;h>=0;--h){var i=d[h];if(b[e]!==i)break;b.pop(),e--}b=d}}function f(a){for(var b=[],c=0;c<a.length;++c){var d=a[c],e=o.test(d)||"    (No stack trace)"===d,f=e&&r(d);e&&!f&&(q&&" "!==d.charAt(0)&&(d="    "+d),b.push(d))}return b}function g(a){for(var b=a.stack.replace(/\s+$/g,"").split("\n"),c=0;c<b.length;++c){var d=b[c];if("    (No stack trace)"===d||o.test(d))break}return c>0&&(b=b.slice(c)),b}function h(a){var b;if("function"==typeof a)b="[function "+(a.name||"anonymous")+"]";else{b=a.toString();var c=/\[object [a-zA-Z0-9$_]+\]/;if(c.test(b))try{var d=JSON.stringify(a);b=d}catch(e){}0===b.length&&(b="(empty array)")}return"(<"+i(b)+">, no stack trace)"}function i(a){var b=41;return a.length<b?a:a.substr(0,b-3)+"..."}function j(a){var b=a.match(s);return b?{fileName:b[1],line:parseInt(b[2],10)}:void 0}var k,l=a("./async.js"),m=a("./util.js"),n=/[\\\/]bluebird[\\\/]js[\\\/](main|debug|zalgo|instrumented)/,o=null,p=null,q=!1;m.inherits(b,Error),b.prototype.uncycle=function(){var a=this._length;if(!(2>a)){for(var b=[],c={},d=0,e=this;void 0!==e;++d)b.push(e),e=e._parent;a=this._length=d;for(var d=a-1;d>=0;--d){var f=b[d].stack;void 0===c[f]&&(c[f]=d)}for(var d=0;a>d;++d){var g=b[d].stack,h=c[g];if(void 0!==h&&h!==d){h>0&&(b[h-1]._parent=void 0,b[h-1]._length=1),b[d]._parent=void 0,b[d]._length=1;var i=d>0?b[d-1]:this;a-1>h?(i._parent=b[h+1],i._parent.uncycle(),i._length=i._parent._length+1):(i._parent=void 0,i._length=1);for(var j=i._length+1,k=d-2;k>=0;--k)b[k]._length=j,j++;return}}}},b.prototype.parent=function(){return this._parent},b.prototype.hasParent=function(){return void 0!==this._parent},b.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();for(var g=b.parseStackAndMessage(a),h=g.message,i=[g.stack],j=this;void 0!==j;)i.push(f(j.stack.split("\n"))),j=j._parent;e(i),d(i),m.notEnumerableProp(a,"stack",c(h,i)),m.notEnumerableProp(a,"__stackCleaned__",!0)}},b.parseStackAndMessage=function(a){var b=a.stack,c=a.toString();return b="string"==typeof b&&b.length>0?g(a):["    (No stack trace)"],{message:c,stack:f(b)}},b.formatAndLogError=function(a,b){if("undefined"!=typeof console){var c;if("object"==typeof a||"function"==typeof a){var d=a.stack;c=b+p(d,a)}else c=b+String(a);"function"==typeof k?k(c):("function"==typeof console.log||"object"==typeof console.log)&&console.log(c)}},b.unhandledRejection=function(a){b.formatAndLogError(a,"^--- With additional stack trace: ")},b.isSupported=function(){return"function"==typeof u},b.fireRejectionEvent=function(a,c,d,e){var f=!1;try{"function"==typeof c&&(f=!0,"rejectionHandled"===a?c(e):c(d,e))}catch(g){l.throwLater(g)}var h=!1;try{h=v(a,d,e)}catch(g){h=!0,l.throwLater(g)}var i=!1;if(t)try{i=t(a.toLowerCase(),{reason:d,promise:e})}catch(g){i=!0,l.throwLater(g)}h||f||i||"unhandledRejection"!==a||b.formatAndLogError(d,"Unhandled rejection ")};var r=function(){return!1},s=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;b.setBounds=function(a,c){if(b.isSupported()){for(var d,e,f=a.stack.split("\n"),g=c.stack.split("\n"),h=-1,i=-1,k=0;k<f.length;++k){var l=j(f[k]);if(l){d=l.fileName,h=l.line;break}}for(var k=0;k<g.length;++k){var l=j(g[k]);if(l){e=l.fileName,i=l.line;break}}0>h||0>i||!d||!e||d!==e||h>=i||(r=function(a){if(n.test(a))return!0;var b=j(a);return b&&b.fileName===d&&h<=b.line&&b.line<=i?!0:!1})}};var t,u=function(){var a=/^\s*at\s*/,b=function(a,b){return"string"==typeof a?a:void 0!==b.name&&void 0!==b.message?b.toString():h(b)};if("number"==typeof Error.stackTraceLimit&&"function"==typeof Error.captureStackTrace){Error.stackTraceLimit=Error.stackTraceLimit+6,o=a,p=b;var c=Error.captureStackTrace;return r=function(a){return n.test(a)},function(a,b){Error.stackTraceLimit=Error.stackTraceLimit+6,c(a,b),Error.stackTraceLimit=Error.stackTraceLimit-6}}var d=new Error;if("string"==typeof d.stack&&d.stack.split("\n")[0].indexOf("stackDetection@")>=0)return o=/@/,p=b,q=!0,function(a){a.stack=(new Error).stack};var e;try{throw new Error}catch(f){e="stack"in f}return"stack"in d||!e||"number"!=typeof Error.stackTraceLimit?(p=function(a,b){return"string"==typeof a?a:"object"!=typeof b&&"function"!=typeof b||void 0===b.name||void 0===b.message?h(b):b.toString()},null):(o=a,p=b,function(a){Error.stackTraceLimit=Error.stackTraceLimit+6;try{throw new Error}catch(b){a.stack=b.stack}Error.stackTraceLimit=Error.stackTraceLimit-6})}([]),v=function(){if(m.isNode)return function(a,b,c){return"rejectionHandled"===a?process.emit(a,c):process.emit(a,b,c)};var a=!1,b=!0;try{var c=new self.CustomEvent("test");a=c instanceof CustomEvent}catch(d){}if(!a)try{var e=document.createEvent("CustomEvent");e.initCustomEvent("testingtheevent",!1,!0,{}),self.dispatchEvent(e)}catch(d){b=!1}b&&(t=function(b,c){var d;return a?d=new self.CustomEvent(b,{detail:c,bubbles:!1,cancelable:!0}):self.dispatchEvent&&(d=document.createEvent("CustomEvent"),d.initCustomEvent(b,!1,!0,c)),d?!self.dispatchEvent(d):!1});var f={};return f.unhandledRejection="onunhandledRejection".toLowerCase(),f.rejectionHandled="onrejectionHandled".toLowerCase(),function(a,b,c){var d=f[a],e=self[d];return e?("rejectionHandled"===a?e.call(self,c):e.call(self,b,c),!0):!1}}();return"undefined"!=typeof console&&"undefined"!=typeof console.warn&&(k=function(a){console.warn(a)},m.isNode&&process.stderr.isTTY?k=function(a){process.stderr.write("[31m"+a+"[39m\n")}:m.isNode||"string"!=typeof(new Error).stack||(k=function(a){console.warn("%c"+a,"color: red")})),b}},{"./async.js":2,"./util.js":38}],8:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b,c){this._instances=a,this._callback=b,this._promise=c}function d(a,b){var c={},d=g(a).call(c,b);if(d===h)return d;var e=i(c);return e.length?(h.e=new j("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"),h):d}var e=a("./util.js"),f=a("./errors.js"),g=e.tryCatch,h=e.errorObj,i=a("./es5.js").keys,j=f.TypeError;return c.prototype.doFilter=function(a){for(var c=this._callback,e=this._promise,f=e._boundValue(),i=0,j=this._instances.length;j>i;++i){var k=this._instances[i],l=k===Error||null!=k&&k.prototype instanceof Error;if(l&&a instanceof k){var m=g(c).call(f,a);return m===h?(b.e=m.e,b):m}if("function"==typeof k&&!l){var n=d(k,a);if(n===h){a=h.e;break}if(n){var m=g(c).call(f,a);return m===h?(b.e=m.e,b):m}}}return b.e=a,b},c}},{"./errors.js":13,"./es5.js":14,"./util.js":38}],9:[function(a,b,c){"use strict";b.exports=function(a,b,c){function d(){this._trace=new b(f())}function e(){return c()?new d:void 0}function f(){var a=g.length-1;return a>=0?g[a]:void 0}var g=[];return d.prototype._pushContext=function(){c()&&void 0!==this._trace&&g.push(this._trace)},d.prototype._popContext=function(){c()&&void 0!==this._trace&&g.pop()},a.prototype._peekContext=f,a.prototype._pushContext=d.prototype._pushContext,a.prototype._popContext=d.prototype._popContext,e}},{}],10:[function(a,b,c){"use strict";b.exports=function(b,c){var d,e,f=b._getDomain,g=a("./async.js"),h=a("./errors.js").Warning,i=a("./util.js"),j=i.canAttachTrace,k=i.isNode&&(!!process.env.BLUEBIRD_DEBUG||"development"===process.env.NODE_ENV);return i.isNode&&0==process.env.BLUEBIRD_DEBUG&&(k=!1),k&&g.disableTrampolineIfNecessary(),b.prototype._ignoreRejections=function(){this._unsetRejectionIsUnhandled(),this._bitField=16777216|this._bitField},b.prototype._ensurePossibleRejectionHandled=function(){0===(16777216&this._bitField)&&(this._setRejectionIsUnhandled(),g.invokeLater(this._notifyUnhandledRejection,this,void 0))},b.prototype._notifyUnhandledRejectionIsHandled=function(){c.fireRejectionEvent("rejectionHandled",d,void 0,this)},b.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=this._getCarriedStackTrace()||this._settledValue;this._setUnhandledRejectionIsNotified(),c.fireRejectionEvent("unhandledRejection",e,a,this)}},b.prototype._setUnhandledRejectionIsNotified=function(){this._bitField=524288|this._bitField},b.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField=-524289&this._bitField},b.prototype._isUnhandledRejectionNotified=function(){return(524288&this._bitField)>0},b.prototype._setRejectionIsUnhandled=function(){this._bitField=2097152|this._bitField},b.prototype._unsetRejectionIsUnhandled=function(){this._bitField=-2097153&this._bitField,this._isUnhandledRejectionNotified()&&(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())},b.prototype._isRejectionUnhandled=function(){return(2097152&this._bitField)>0},b.prototype._setCarriedStackTrace=function(a){this._bitField=1048576|this._bitField,this._fulfillmentHandler0=a},b.prototype._isCarryingStackTrace=function(){return(1048576&this._bitField)>0},b.prototype._getCarriedStackTrace=function(){return this._isCarryingStackTrace()?this._fulfillmentHandler0:void 0},b.prototype._captureStackTrace=function(){return k&&(this._trace=new c(this._peekContext())),this},b.prototype._attachExtraTrace=function(a,b){if(k&&j(a)){var d=this._trace;if(void 0!==d&&b&&(d=d._parent),void 0!==d)d.attachExtraTrace(a);else if(!a.__stackCleaned__){var e=c.parseStackAndMessage(a);i.notEnumerableProp(a,"stack",e.message+"\n"+e.stack.join("\n")),i.notEnumerableProp(a,"__stackCleaned__",!0)}}},b.prototype._warn=function(a){var b=new h(a),d=this._peekContext();if(d)d.attachExtraTrace(b);else{var e=c.parseStackAndMessage(b);b.stack=e.message+"\n"+e.stack.join("\n")}c.formatAndLogError(b,"")},b.onPossiblyUnhandledRejection=function(a){var b=f();e="function"==typeof a?null===b?a:b.bind(a):void 0},b.onUnhandledRejectionHandled=function(a){var b=f();d="function"==typeof a?null===b?a:b.bind(a):void 0},b.longStackTraces=function(){if(g.haveItemsQueued()&&k===!1)throw new Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/DT1qyG\n");k=c.isSupported(),k&&g.disableTrampolineIfNecessary()},b.hasLongStackTraces=function(){return k&&c.isSupported()},c.isSupported()||(b.longStackTraces=function(){},k=!1),function(){return k}}},{"./async.js":2,"./errors.js":13,"./util.js":38}],11:[function(a,b,c){"use strict";var d=a("./util.js"),e=d.isPrimitive;b.exports=function(a){var b=function(){return this},c=function(){throw this},d=function(){},f=function(){throw void 0},g=function(a,b){return 1===b?function(){throw a}:2===b?function(){return a}:void 0};a.prototype["return"]=a.prototype.thenReturn=function(c){return void 0===c?this.then(d):e(c)?this._then(g(c,2),void 0,void 0,void 0,void 0):(c instanceof a&&c._ignoreRejections(),this._then(b,void 0,void 0,c,void 0))},a.prototype["throw"]=a.prototype.thenThrow=function(a){return void 0===a?this.then(f):e(a)?this._then(g(a,1),void 0,void 0,void 0,void 0):this._then(c,void 0,void 0,a,void 0)}}},{"./util.js":38}],12:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.reduce;a.prototype.each=function(a){return c(this,a,null,b)},a.each=function(a,d){return c(a,d,null,b)}}},{}],13:[function(a,b,c){"use strict";function d(a,b){function c(d){return this instanceof c?(l(this,"message","string"==typeof d?d:b),l(this,"name",a),void(Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this))):new c(d)}return k(c,Error),c}function e(a){return this instanceof e?(l(this,"name","OperationalError"),l(this,"message",a),this.cause=a,this.isOperational=!0,void(a instanceof Error?(l(this,"message",a.message),l(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor))):new e(a)}var f,g,h=a("./es5.js"),i=h.freeze,j=a("./util.js"),k=j.inherits,l=j.notEnumerableProp,m=d("Warning","warning"),n=d("CancellationError","cancellation error"),o=d("TimeoutError","timeout error"),p=d("AggregateError","aggregate error");try{f=TypeError,g=RangeError}catch(q){f=d("TypeError","type error"),g=d("RangeError","range error")}for(var r="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),s=0;s<r.length;++s)"function"==typeof Array.prototype[r[s]]&&(p.prototype[r[s]]=Array.prototype[r[s]]);h.defineProperty(p.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0}),p.prototype.isOperational=!0;var t=0;p.prototype.toString=function(){var a=Array(4*t+1).join(" "),b="\n"+a+"AggregateError of:\n";t++,a=Array(4*t+1).join(" ");for(var c=0;c<this.length;++c){for(var d=this[c]===this?"[Circular AggregateError]":this[c]+"",e=d.split("\n"),f=0;f<e.length;++f)e[f]=a+e[f];d=e.join("\n"),b+=d+"\n"}return t--,b},k(e,Error);var u=Error.__BluebirdErrorTypes__;u||(u=i({CancellationError:n,TimeoutError:o,OperationalError:e,RejectionError:e,AggregateError:p}),l(Error,"__BluebirdErrorTypes__",u)),b.exports={Error:Error,TypeError:f,RangeError:g,CancellationError:u.CancellationError,OperationalError:u.OperationalError,TimeoutError:u.TimeoutError,AggregateError:u.AggregateError,Warning:m}},{"./es5.js":14,"./util.js":38}],14:[function(a,b,c){var d=function(){"use strict";return void 0===this}();if(d)b.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:d,propertyIsWritable:function(a,b){var c=Object.getOwnPropertyDescriptor(a,b);return!(c&&!c.writable&&!c.set)}};else{var e={}.hasOwnProperty,f={}.toString,g={}.constructor.prototype,h=function(a){var b=[];for(var c in a)e.call(a,c)&&b.push(c);return b},i=function(a,b){return{value:a[b]}},j=function(a,b,c){return a[b]=c.value,a},k=function(a){return a},l=function(a){try{return Object(a).constructor.prototype}catch(b){return g}},m=function(a){try{return"[object Array]"===f.call(a)}catch(b){return!1}};b.exports={isArray:m,keys:h,names:h,defineProperty:j,getDescriptor:i,freeze:k,getPrototypeOf:l,isES5:d,propertyIsWritable:function(){return!0}}}},{}],15:[function(a,b,c){"use strict";b.exports=function(a,b){var c=a.map;a.prototype.filter=function(a,d){return c(this,a,d,b)},a.filter=function(a,d,e){return c(a,d,e,b)}}},{}],16:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(){return this}function f(){throw this}function g(a){return function(){return a}}function h(a){return function(){throw a}}function i(a,b,c){var d;return d=m(b)?c?g(b):h(b):c?e:f,a._then(d,n,void 0,b,void 0)}function j(a){var e=this.promise,f=this.handler,g=e._isBound()?f.call(e._boundValue()):f();if(void 0!==g){var h=d(g,e);if(h instanceof b)return h=h._target(),i(h,a,e.isFulfilled())}return e.isRejected()?(c.e=a,c):a}function k(a){var c=this.promise,e=this.handler,f=c._isBound()?e.call(c._boundValue(),a):e(a);if(void 0!==f){var g=d(f,c);if(g instanceof b)return g=g._target(),i(g,a,!0)}return a}var l=a("./util.js"),m=l.isPrimitive,n=l.thrower;b.prototype._passThroughHandler=function(a,b){if("function"!=typeof a)return this.then();var c={promise:this,handler:a};return this._then(b?j:k,b?j:void 0,void 0,c,void 0)},b.prototype.lastly=b.prototype["finally"]=function(a){return this._passThroughHandler(a,!0)},b.prototype.tap=function(a){return this._passThroughHandler(a,!1)}}},{"./util.js":38}],17:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,c,d){for(var f=0;f<c.length;++f){d._pushContext();var g=l(c[f])(a);if(d._popContext(),g===k){d._pushContext();var h=b.reject(k.e);return d._popContext(),h}var i=e(g,d);if(i instanceof b)return i}return null}function g(a,c,e,f){var g=this._promise=new b(d);g._captureStackTrace(),this._stack=f,this._generatorFunction=a,this._receiver=c,this._generator=void 0,this._yieldHandlers="function"==typeof e?[e].concat(m):m}var h=a("./errors.js"),i=h.TypeError,j=a("./util.js"),k=j.errorObj,l=j.tryCatch,m=[];g.prototype.promise=function(){return this._promise},g.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver),this._receiver=this._generatorFunction=void 0,this._next(void 0)},g.prototype._continue=function(a){if(a===k)return this._promise._rejectCallback(a.e,!1,!0);var c=a.value;if(a.done===!0)this._promise._resolveCallback(c);else{var d=e(c,this._promise);if(!(d instanceof b)&&(d=f(d,this._yieldHandlers,this._promise),null===d))return void this._throw(new i("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/4Y4pDk\n\n".replace("%s",c)+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")));d._then(this._next,this._throw,void 0,this,null)}},g.prototype._throw=function(a){this._promise._attachExtraTrace(a),this._promise._pushContext();var b=l(this._generator["throw"]).call(this._generator,a);this._promise._popContext(),this._continue(b)},g.prototype._next=function(a){this._promise._pushContext();var b=l(this._generator.next).call(this._generator,a);this._promise._popContext(),this._continue(b)},b.coroutine=function(a,b){if("function"!=typeof a)throw new i("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var c=Object(b).yieldHandler,d=g,e=(new Error).stack;return function(){var b=a.apply(this,arguments),f=new d(void 0,void 0,c,e);return f._generator=b,f._next(void 0),f.promise()}},b.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new i("fn must be a function\n\n    See http://goo.gl/916lJJ\n");m.push(a)},b.spawn=function(a){if("function"!=typeof a)return c("generatorFunction must be a function\n\n    See http://goo.gl/6Vqhm0\n");var d=new g(a,this),e=d.promise();return d._run(b.spawn),e}}},{"./errors.js":13,"./util.js":38}],18:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util.js");f.canEvaluate,f.tryCatch,f.errorObj;b.join=function(){var a,b=arguments.length-1;if(b>0&&"function"==typeof arguments[b]){a=arguments[b];var d}for(var e=arguments.length,f=new Array(e),g=0;e>g;++g)f[g]=arguments[g];a&&f.pop();var d=new c(f).promise();return void 0!==a?d.spread(a):d}}},{"./util.js":38}],19:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a,b,c,d){this.constructor$(a),this._promise._captureStackTrace();var e=j();this._callback=null===e?b:e.bind(b),this._preservedValues=d===f?new Array(this.length()):null,this._limit=c,this._inFlight=0,this._queue=c>=1?[]:p,k.invoke(h,this,void 0)}function h(){this._init$(void 0,-2)}function i(a,b,c,d){var e="object"==typeof c&&null!==c?c.concurrency:0;return e="number"==typeof e&&isFinite(e)&&e>=1?e:0,new g(a,b,e,d)}var j=b._getDomain,k=a("./async.js"),l=a("./util.js"),m=l.tryCatch,n=l.errorObj,o={},p=[];l.inherits(g,c),g.prototype._init=function(){},g.prototype._promiseFulfilled=function(a,c){var d=this._values,f=this.length(),g=this._preservedValues,h=this._limit;if(d[c]===o){if(d[c]=a,h>=1&&(this._inFlight--,this._drainQueue(),this._isResolved()))return}else{if(h>=1&&this._inFlight>=h)return d[c]=a,void this._queue.push(c);null!==g&&(g[c]=a);var i=this._callback,j=this._promise._boundValue();this._promise._pushContext();var k=m(i).call(j,a,c,f);if(this._promise._popContext(),k===n)return this._reject(k.e);var l=e(k,this._promise);if(l instanceof b){if(l=l._target(),l._isPending())return h>=1&&this._inFlight++,d[c]=o,l._proxyPromiseArray(this,c);if(!l._isFulfilled())return this._reject(l._reason());k=l._value()}d[c]=k}var p=++this._totalResolved;p>=f&&(null!==g?this._filter(d,g):this._resolve(d))},g.prototype._drainQueue=function(){for(var a=this._queue,b=this._limit,c=this._values;a.length>0&&this._inFlight<b;){if(this._isResolved())return;var d=a.pop();this._promiseFulfilled(c[d],d)}},g.prototype._filter=function(a,b){for(var c=b.length,d=new Array(c),e=0,f=0;c>f;++f)a[f]&&(d[e++]=b[f]);d.length=e,this._resolve(d)},g.prototype.preservedValues=function(){return this._preservedValues},b.prototype.map=function(a,b){return"function"!=typeof a?d("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):i(this,a,b,null).promise()},b.map=function(a,b,c,e){return"function"!=typeof b?d("fn must be a function\n\n    See http://goo.gl/916lJJ\n"):i(a,b,c,e).promise()}}},{"./async.js":2,"./util.js":38}],20:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){var f=a("./util.js"),g=f.tryCatch;b.method=function(a){if("function"!=typeof a)throw new b.TypeError("fn must be a function\n\n    See http://goo.gl/916lJJ\n");return function(){var d=new b(c);d._captureStackTrace(),d._pushContext();var e=g(a).apply(this,arguments);return d._popContext(),d._resolveFromSyncValue(e),d}},b.attempt=b["try"]=function(a,d,h){if("function"!=typeof a)return e("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var i=new b(c);i._captureStackTrace(),i._pushContext();var j=f.isArray(d)?g(a).apply(h,d):g(a).call(h,d);return i._popContext(),i._resolveFromSyncValue(j),i},b.prototype._resolveFromSyncValue=function(a){a===f.errorObj?this._rejectCallback(a.e,!1,!0):this._resolveCallback(a,!0)}}},{"./util.js":38}],21:[function(a,b,c){"use strict";b.exports=function(b){function c(a,b){var c=this;if(!f.isArray(a))return d.call(c,a,b);var e=h(b).apply(c._boundValue(),[null].concat(a));e===i&&g.throwLater(e.e)}function d(a,b){var c=this,d=c._boundValue(),e=void 0===a?h(b).call(d,null):h(b).call(d,null,a);e===i&&g.throwLater(e.e)}function e(a,b){var c=this;if(!a){var d=c._target(),e=d._getCarriedStackTrace();e.cause=a,a=e}var f=h(b).call(c._boundValue(),a);f===i&&g.throwLater(f.e)}var f=a("./util.js"),g=a("./async.js"),h=f.tryCatch,i=f.errorObj;b.prototype.asCallback=b.prototype.nodeify=function(a,b){if("function"==typeof a){var f=d;void 0!==b&&Object(b).spread&&(f=c),this._then(f,e,void 0,this,a)}return this}}},{"./async.js":2,"./util.js":38}],22:[function(a,b,c){"use strict";b.exports=function(b,c){var d=a("./util.js"),e=a("./async.js"),f=d.tryCatch,g=d.errorObj;b.prototype.progressed=function(a){return this._then(void 0,void 0,a,void 0,void 0)},b.prototype._progress=function(a){this._isFollowingOrFulfilledOrRejected()||this._target()._progressUnchecked(a)},b.prototype._progressHandlerAt=function(a){return 0===a?this._progressHandler0:this[(a<<2)+a-5+2]},b.prototype._doProgressWith=function(a){var c=a.value,e=a.handler,h=a.promise,i=a.receiver,j=f(e).call(i,c);if(j===g){if(null!=j.e&&"StopProgressPropagation"!==j.e.name){var k=d.canAttachTrace(j.e)?j.e:new Error(d.toString(j.e));h._attachExtraTrace(k),h._progress(j.e)}}else j instanceof b?j._then(h._progress,null,null,h,void 0):h._progress(j)},b.prototype._progressUnchecked=function(a){for(var d=this._length(),f=this._progress,g=0;d>g;g++){var h=this._progressHandlerAt(g),i=this._promiseAt(g);if(i instanceof b)"function"==typeof h?e.invoke(this._doProgressWith,this,{handler:h,promise:i,receiver:this._receiverAt(g),value:a}):e.invoke(f,i,a);else{var j=this._receiverAt(g);"function"==typeof h?h.call(j,a,i):j instanceof c&&!j._isResolved()&&j._promiseProgressed(a,i)}}}}},{"./async.js":2,"./util.js":38}],23:[function(a,b,c){"use strict";b.exports=function(){function b(a){if("function"!=typeof a)throw new l("the promise constructor requires a resolver function\n\n    See http://goo.gl/EC22Yn\n");if(this.constructor!==b)throw new l("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/KsIlge\n");this._bitField=0,this._fulfillmentHandler0=void 0,this._rejectionHandler0=void 0,this._progressHandler0=void 0,this._promise0=void 0,this._receiver0=void 0,this._settledValue=void 0,a!==m&&this._resolveFromResolver(a)}function c(a){var c=new b(m);c._fulfillmentHandler0=a,c._rejectionHandler0=a,c._progressHandler0=a,c._promise0=a,c._receiver0=a,c._settledValue=a}var d,e=function(){return new l("circular promise resolution chain\n\n    See http://goo.gl/LhFpo0\n")},f=function(){return new b.PromiseInspection(this._target())},g=function(a){return b.reject(new l(a))},h=a("./util.js");d=h.isNode?function(){var a=process.domain;return void 0===a&&(a=null),a}:function(){return null},h.notEnumerableProp(b,"_getDomain",d);var i={},j=a("./async.js"),k=a("./errors.js"),l=b.TypeError=k.TypeError;b.RangeError=k.RangeError,b.CancellationError=k.CancellationError,b.TimeoutError=k.TimeoutError,b.OperationalError=k.OperationalError,b.RejectionError=k.OperationalError,b.AggregateError=k.AggregateError;var m=function(){},n={},o={e:null},p=a("./thenables.js")(b,m),q=a("./promise_array.js")(b,m,p,g),r=a("./captured_trace.js")(),s=a("./debuggability.js")(b,r),t=a("./context.js")(b,r,s),u=a("./catch_filter.js")(o),v=a("./promise_resolver.js"),w=v._nodebackForPromise,x=h.errorObj,y=h.tryCatch;return b.prototype.toString=function(){return"[object Promise]"},b.prototype.caught=b.prototype["catch"]=function(a){var c=arguments.length;if(c>1){var d,e=new Array(c-1),f=0;for(d=0;c-1>d;++d){var g=arguments[d];if("function"!=typeof g)return b.reject(new l("Catch filter must inherit from Error or be a simple predicate function\n\n    See http://goo.gl/o84o68\n"));e[f++]=g}e.length=f,a=arguments[d];var h=new u(e,a,this);return this._then(void 0,h.doFilter,void 0,h,void 0)}return this._then(void 0,a,void 0,void 0,void 0)},b.prototype.reflect=function(){return this._then(f,f,void 0,this,void 0)},b.prototype.then=function(a,b,c){if(s()&&arguments.length>0&&"function"!=typeof a&&"function"!=typeof b){var d=".then() only accepts functions but was passed: "+h.classString(a);arguments.length>1&&(d+=", "+h.classString(b)),this._warn(d)}return this._then(a,b,c,void 0,void 0)},b.prototype.done=function(a,b,c){var d=this._then(a,b,c,void 0,void 0);d._setIsFinal()},b.prototype.spread=function(a,b){return this.all()._then(a,b,void 0,n,void 0)},b.prototype.isCancellable=function(){return!this.isResolved()&&this._cancellable()},b.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},b.prototype.all=function(){return new q(this).promise()},b.prototype.error=function(a){return this.caught(h.originatesFromRejection,a)},b.is=function(a){return a instanceof b},b.fromNode=function(a){var c=new b(m),d=y(a)(w(c));return d===x&&c._rejectCallback(d.e,!0,!0),c},b.all=function(a){return new q(a).promise()},b.defer=b.pending=function(){var a=new b(m);return new v(a)},b.cast=function(a){var c=p(a);if(!(c instanceof b)){var d=c;c=new b(m),c._fulfillUnchecked(d)}return c},b.resolve=b.fulfilled=b.cast,b.reject=b.rejected=function(a){var c=new b(m);return c._captureStackTrace(),c._rejectCallback(a,!0),c},b.setScheduler=function(a){if("function"!=typeof a)throw new l("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var b=j._schedule;return j._schedule=a,b},b.prototype._then=function(a,c,e,f,g){var h=void 0!==g,i=h?g:new b(m);h||(i._propagateFrom(this,5),i._captureStackTrace());var k=this._target();k!==this&&(void 0===f&&(f=this._boundTo),h||i._setIsMigrated());var l=k._addCallbacks(a,c,e,i,f,d());return k._isResolved()&&!k._isSettlePromisesQueued()&&j.invoke(k._settlePromiseAtPostResolution,k,l),i},b.prototype._settlePromiseAtPostResolution=function(a){
this._isRejectionUnhandled()&&this._unsetRejectionIsUnhandled(),this._settlePromiseAt(a)},b.prototype._length=function(){return 131071&this._bitField},b.prototype._isFollowingOrFulfilledOrRejected=function(){return(939524096&this._bitField)>0},b.prototype._isFollowing=function(){return 536870912===(536870912&this._bitField)},b.prototype._setLength=function(a){this._bitField=-131072&this._bitField|131071&a},b.prototype._setFulfilled=function(){this._bitField=268435456|this._bitField},b.prototype._setRejected=function(){this._bitField=134217728|this._bitField},b.prototype._setFollowing=function(){this._bitField=536870912|this._bitField},b.prototype._setIsFinal=function(){this._bitField=33554432|this._bitField},b.prototype._isFinal=function(){return(33554432&this._bitField)>0},b.prototype._cancellable=function(){return(67108864&this._bitField)>0},b.prototype._setCancellable=function(){this._bitField=67108864|this._bitField},b.prototype._unsetCancellable=function(){this._bitField=-67108865&this._bitField},b.prototype._setIsMigrated=function(){this._bitField=4194304|this._bitField},b.prototype._unsetIsMigrated=function(){this._bitField=-4194305&this._bitField},b.prototype._isMigrated=function(){return(4194304&this._bitField)>0},b.prototype._receiverAt=function(a){var b=0===a?this._receiver0:this[5*a-5+4];if(b!==i)return void 0===b&&this._isBound()?this._boundValue():b},b.prototype._promiseAt=function(a){return 0===a?this._promise0:this[5*a-5+3]},b.prototype._fulfillmentHandlerAt=function(a){return 0===a?this._fulfillmentHandler0:this[5*a-5+0]},b.prototype._rejectionHandlerAt=function(a){return 0===a?this._rejectionHandler0:this[5*a-5+1]},b.prototype._boundValue=function(){var a=this._boundTo;return void 0!==a&&a instanceof b?a.isFulfilled()?a.value():void 0:a},b.prototype._migrateCallbacks=function(a,c){var d=a._fulfillmentHandlerAt(c),e=a._rejectionHandlerAt(c),f=a._progressHandlerAt(c),g=a._promiseAt(c),h=a._receiverAt(c);g instanceof b&&g._setIsMigrated(),void 0===h&&(h=i),this._addCallbacks(d,e,f,g,h,null)},b.prototype._addCallbacks=function(a,b,c,d,e,f){var g=this._length();if(g>=131066&&(g=0,this._setLength(0)),0===g)this._promise0=d,void 0!==e&&(this._receiver0=e),"function"!=typeof a||this._isCarryingStackTrace()||(this._fulfillmentHandler0=null===f?a:f.bind(a)),"function"==typeof b&&(this._rejectionHandler0=null===f?b:f.bind(b)),"function"==typeof c&&(this._progressHandler0=null===f?c:f.bind(c));else{var h=5*g-5;this[h+3]=d,this[h+4]=e,"function"==typeof a&&(this[h+0]=null===f?a:f.bind(a)),"function"==typeof b&&(this[h+1]=null===f?b:f.bind(b)),"function"==typeof c&&(this[h+2]=null===f?c:f.bind(c))}return this._setLength(g+1),g},b.prototype._setProxyHandlers=function(a,b){var c=this._length();if(c>=131066&&(c=0,this._setLength(0)),0===c)this._promise0=b,this._receiver0=a;else{var d=5*c-5;this[d+3]=b,this[d+4]=a}this._setLength(c+1)},b.prototype._proxyPromiseArray=function(a,b){this._setProxyHandlers(a,b)},b.prototype._resolveCallback=function(a,c){if(!this._isFollowingOrFulfilledOrRejected()){if(a===this)return this._rejectCallback(e(),!1,!0);var d=p(a,this);if(!(d instanceof b))return this._fulfill(a);var f=1|(c?4:0);this._propagateFrom(d,f);var g=d._target();if(g._isPending()){for(var h=this._length(),i=0;h>i;++i)g._migrateCallbacks(this,i);this._setFollowing(),this._setLength(0),this._setFollowee(g)}else g._isFulfilled()?this._fulfillUnchecked(g._value()):this._rejectUnchecked(g._reason(),g._getCarriedStackTrace())}},b.prototype._rejectCallback=function(a,b,c){c||h.markAsOriginatingFromRejection(a);var d=h.ensureErrorObject(a),e=d===a;this._attachExtraTrace(d,b?e:!1),this._reject(a,e?void 0:d)},b.prototype._resolveFromResolver=function(a){var b=this;this._captureStackTrace(),this._pushContext();var c=!0,d=y(a)(function(a){null!==b&&(b._resolveCallback(a),b=null)},function(a){null!==b&&(b._rejectCallback(a,c),b=null)});c=!1,this._popContext(),void 0!==d&&d===x&&null!==b&&(b._rejectCallback(d.e,!0,!0),b=null)},b.prototype._settlePromiseFromHandler=function(a,b,c,d){if(!d._isRejected()){d._pushContext();var f;if(f=b!==n||this._isRejected()?y(a).call(b,c):y(a).apply(this._boundValue(),c),d._popContext(),f===x||f===d||f===o){var g=f===d?e():f.e;d._rejectCallback(g,!1,!0)}else d._resolveCallback(f)}},b.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},b.prototype._followee=function(){return this._rejectionHandler0},b.prototype._setFollowee=function(a){this._rejectionHandler0=a},b.prototype._cleanValues=function(){this._cancellable()&&(this._cancellationParent=void 0)},b.prototype._propagateFrom=function(a,b){(1&b)>0&&a._cancellable()&&(this._setCancellable(),this._cancellationParent=a),(4&b)>0&&a._isBound()&&this._setBoundTo(a._boundTo)},b.prototype._fulfill=function(a){this._isFollowingOrFulfilledOrRejected()||this._fulfillUnchecked(a)},b.prototype._reject=function(a,b){this._isFollowingOrFulfilledOrRejected()||this._rejectUnchecked(a,b)},b.prototype._settlePromiseAt=function(a){var c=this._promiseAt(a),d=c instanceof b;if(d&&c._isMigrated())return c._unsetIsMigrated(),j.invoke(this._settlePromiseAt,this,a);var e=this._isFulfilled()?this._fulfillmentHandlerAt(a):this._rejectionHandlerAt(a),f=this._isCarryingStackTrace()?this._getCarriedStackTrace():void 0,g=this._settledValue,h=this._receiverAt(a);this._clearCallbackDataAtIndex(a),"function"==typeof e?d?this._settlePromiseFromHandler(e,h,g,c):e.call(h,g,c):h instanceof q?h._isResolved()||(this._isFulfilled()?h._promiseFulfilled(g,c):h._promiseRejected(g,c)):d&&(this._isFulfilled()?c._fulfill(g):c._reject(g,f)),a>=4&&4===(31&a)&&j.invokeLater(this._setLength,this,0)},b.prototype._clearCallbackDataAtIndex=function(a){if(0===a)this._isCarryingStackTrace()||(this._fulfillmentHandler0=void 0),this._rejectionHandler0=this._progressHandler0=this._receiver0=this._promise0=void 0;else{var b=5*a-5;this[b+3]=this[b+4]=this[b+0]=this[b+1]=this[b+2]=void 0}},b.prototype._isSettlePromisesQueued=function(){return-1073741824===(-1073741824&this._bitField)},b.prototype._setSettlePromisesQueued=function(){this._bitField=-1073741824|this._bitField},b.prototype._unsetSettlePromisesQueued=function(){this._bitField=1073741823&this._bitField},b.prototype._queueSettlePromises=function(){j.settlePromises(this),this._setSettlePromisesQueued()},b.prototype._fulfillUnchecked=function(a){if(a===this){var b=e();return this._attachExtraTrace(b),this._rejectUnchecked(b,void 0)}this._setFulfilled(),this._settledValue=a,this._cleanValues(),this._length()>0&&this._queueSettlePromises()},b.prototype._rejectUncheckedCheckError=function(a){var b=h.ensureErrorObject(a);this._rejectUnchecked(a,b===a?void 0:b)},b.prototype._rejectUnchecked=function(a,b){if(a===this){var c=e();return this._attachExtraTrace(c),this._rejectUnchecked(c)}return this._setRejected(),this._settledValue=a,this._cleanValues(),this._isFinal()?void j.throwLater(function(a){throw"stack"in a&&j.invokeFirst(r.unhandledRejection,void 0,a),a},void 0===b?a:b):(void 0!==b&&b!==a&&this._setCarriedStackTrace(b),void(this._length()>0?this._queueSettlePromises():this._ensurePossibleRejectionHandled()))},b.prototype._settlePromises=function(){this._unsetSettlePromisesQueued();for(var a=this._length(),b=0;a>b;b++)this._settlePromiseAt(b)},h.notEnumerableProp(b,"_makeSelfResolutionError",e),a("./progress.js")(b,q),a("./method.js")(b,m,p,g),a("./bind.js")(b,m,p),a("./finally.js")(b,o,p),a("./direct_resolve.js")(b),a("./synchronous_inspection.js")(b),a("./join.js")(b,q,p,m),b.Promise=b,a("./map.js")(b,q,g,p,m),a("./cancel.js")(b),a("./using.js")(b,g,p,t),a("./generators.js")(b,g,m,p),a("./nodeify.js")(b),a("./call_get.js")(b),a("./props.js")(b,q,p,g),a("./race.js")(b,m,p,g),a("./reduce.js")(b,q,g,p,m),a("./settle.js")(b,q),a("./some.js")(b,q,g),a("./promisify.js")(b,m),a("./any.js")(b),a("./each.js")(b,m),a("./timers.js")(b,m),a("./filter.js")(b,m),h.toFastProperties(b),h.toFastProperties(b.prototype),c({a:1}),c({b:2}),c({c:3}),c(1),c(function(){}),c(void 0),c(!1),c(new b(m)),r.setBounds(j.firstLineError,h.lastLineError),b}},{"./any.js":1,"./async.js":2,"./bind.js":3,"./call_get.js":5,"./cancel.js":6,"./captured_trace.js":7,"./catch_filter.js":8,"./context.js":9,"./debuggability.js":10,"./direct_resolve.js":11,"./each.js":12,"./errors.js":13,"./filter.js":15,"./finally.js":16,"./generators.js":17,"./join.js":18,"./map.js":19,"./method.js":20,"./nodeify.js":21,"./progress.js":22,"./promise_array.js":24,"./promise_resolver.js":25,"./promisify.js":26,"./props.js":27,"./race.js":29,"./reduce.js":30,"./settle.js":32,"./some.js":33,"./synchronous_inspection.js":34,"./thenables.js":35,"./timers.js":36,"./using.js":37,"./util.js":38}],24:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){switch(a){case-2:return[];case-3:return{}}}function g(a){var d,e=this._promise=new b(c);a instanceof b&&(d=a,e._propagateFrom(d,5)),this._values=a,this._length=0,this._totalResolved=0,this._init(void 0,-2)}var h=a("./util.js"),i=h.isArray;return g.prototype.length=function(){return this._length},g.prototype.promise=function(){return this._promise},g.prototype._init=function j(a,c){var g=d(this._values,this._promise);if(g instanceof b){if(g=g._target(),this._values=g,!g._isFulfilled())return g._isPending()?void g._then(j,this._reject,void 0,this,c):void this._reject(g._reason());if(g=g._value(),!i(g)){var h=new b.TypeError("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");return void this.__hardReject__(h)}}else if(!i(g))return void this._promise._reject(e("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n")._reason());if(0===g.length)return void(-5===c?this._resolveEmptyArray():this._resolve(f(c)));var k=this.getActualLength(g.length);this._length=k,this._values=this.shouldCopyValues()?new Array(k):this._values;for(var l=this._promise,m=0;k>m;++m){var n=this._isResolved(),o=d(g[m],l);o instanceof b?(o=o._target(),n?o._ignoreRejections():o._isPending()?o._proxyPromiseArray(this,m):o._isFulfilled()?this._promiseFulfilled(o._value(),m):this._promiseRejected(o._reason(),m)):n||this._promiseFulfilled(o,m)}},g.prototype._isResolved=function(){return null===this._values},g.prototype._resolve=function(a){this._values=null,this._promise._fulfill(a)},g.prototype.__hardReject__=g.prototype._reject=function(a){this._values=null,this._promise._rejectCallback(a,!1,!0)},g.prototype._promiseProgressed=function(a,b){this._promise._progress({index:b,value:a})},g.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;c>=this._length&&this._resolve(this._values)},g.prototype._promiseRejected=function(a,b){this._totalResolved++,this._reject(a)},g.prototype.shouldCopyValues=function(){return!0},g.prototype.getActualLength=function(a){return a},g}},{"./util.js":38}],25:[function(a,b,c){"use strict";function d(a){return a instanceof Error&&n.getPrototypeOf(a)===Error.prototype}function e(a){var b;if(d(a)){b=new l(a),b.name=a.name,b.message=a.message,b.stack=a.stack;for(var c=n.keys(a),e=0;e<c.length;++e){var f=c[e];o.test(f)||(b[f]=a[f])}return b}return h.markAsOriginatingFromRejection(a),a}function f(a){return function(b,c){if(null!==a){if(b){var d=e(i(b));a._attachExtraTrace(d),a._reject(d)}else if(arguments.length>2){for(var f=arguments.length,g=new Array(f-1),h=1;f>h;++h)g[h-1]=arguments[h];a._fulfill(g)}else a._fulfill(c);a=null}}}var g,h=a("./util.js"),i=h.maybeWrapAsError,j=a("./errors.js"),k=j.TimeoutError,l=j.OperationalError,m=h.haveGetters,n=a("./es5.js"),o=/^(?:name|message|stack|cause)$/;if(g=m?function(a){this.promise=a}:function(a){this.promise=a,this.asCallback=f(a),this.callback=this.asCallback},m){var p={get:function(){return f(this.promise)}};n.defineProperty(g.prototype,"asCallback",p),n.defineProperty(g.prototype,"callback",p)}g._nodebackForPromise=f,g.prototype.toString=function(){return"[object PromiseResolver]"},g.prototype.resolve=g.prototype.fulfill=function(a){if(!(this instanceof g))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._resolveCallback(a)},g.prototype.reject=function(a){if(!(this instanceof g))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._rejectCallback(a)},g.prototype.progress=function(a){if(!(this instanceof g))throw new TypeError("Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\n\n    See http://goo.gl/sdkXL9\n");this.promise._progress(a)},g.prototype.cancel=function(a){this.promise.cancel(a)},g.prototype.timeout=function(){this.reject(new k("timeout"))},g.prototype.isResolved=function(){return this.promise.isResolved()},g.prototype.toJSON=function(){return this.promise.toJSON()},b.exports=g},{"./errors.js":13,"./es5.js":14,"./util.js":38}],26:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){return!w.test(a)}function e(a){try{return a.__isPromisified__===!0}catch(b){return!1}}function f(a,b,c){var d=n.getDataPropertyOrDefault(a,b+c,u);return d?e(d):!1}function g(a,b,c){for(var d=0;d<a.length;d+=2){var e=a[d];if(c.test(e))for(var f=e.replace(c,""),g=0;g<a.length;g+=2)if(a[g]===f)throw new s("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/iWrZbw\n".replace("%s",b))}}function h(a,b,c,d){for(var h=n.inheritedDataKeys(a),i=[],j=0;j<h.length;++j){var k=h[j],l=a[k],m=d===x?!0:x(k,l,a);"function"!=typeof l||e(l)||f(a,k,b)||!d(k,l,a,m)||i.push(k,l)}return g(i,b,c),i}function i(a,d,e,f){function g(){var e=d;d===m&&(e=this);var f=new b(c);f._captureStackTrace();var g="string"==typeof i&&this!==h?this[i]:a,j=o(f);try{g.apply(e,p(arguments,j))}catch(k){f._rejectCallback(q(k),!0,!0)}return f}var h=function(){return this}(),i=a;return"string"==typeof i&&(a=f),n.notEnumerableProp(g,"__isPromisified__",!0),g}function j(a,b,c,d){for(var e=new RegExp(y(b)+"$"),f=h(a,b,e,c),g=0,i=f.length;i>g;g+=2){var j=f[g],k=f[g+1],l=j+b;if(d===z)a[l]=z(j,m,j,k,b);else{var o=d(k,function(){return z(j,m,j,k,b)});n.notEnumerableProp(o,"__isPromisified__",!0),a[l]=o}}return n.toFastProperties(a),a}function k(a,b){return z(a,b,void 0,a)}var l,m={},n=a("./util.js"),o=a("./promise_resolver.js")._nodebackForPromise,p=n.withAppended,q=n.maybeWrapAsError,r=n.canEvaluate,s=a("./errors").TypeError,t="Async",u={__isPromisified__:!0},v=["arity","length","name","arguments","caller","callee","prototype","__isPromisified__"],w=new RegExp("^(?:"+v.join("|")+")$"),x=function(a){return n.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},y=function(a){return a.replace(/([$])/,"\\$")},z=r?l:i;b.promisify=function(a,b){if("function"!=typeof a)throw new s("fn must be a function\n\n    See http://goo.gl/916lJJ\n");if(e(a))return a;var c=k(a,arguments.length<2?m:b);return n.copyDescriptors(a,c,d),c},b.promisifyAll=function(a,b){if("function"!=typeof a&&"object"!=typeof a)throw new s("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/9ITlV0\n");b=Object(b);var c=b.suffix;"string"!=typeof c&&(c=t);var d=b.filter;"function"!=typeof d&&(d=x);var e=b.promisifier;if("function"!=typeof e&&(e=z),!n.isIdentifier(c))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/8FZo5V\n");for(var f=n.inheritedDataKeys(a),g=0;g<f.length;++g){var h=a[f[g]];"constructor"!==f[g]&&n.isClass(h)&&(j(h.prototype,c,d,e),j(h,c,d,e))}return j(a,c,d,e)}}},{"./errors":13,"./promise_resolver.js":25,"./util.js":38}],27:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){for(var b=j.keys(a),c=b.length,d=new Array(2*c),e=0;c>e;++e){var f=b[e];d[e]=a[f],d[e+c]=f}this.constructor$(d)}function g(a){var c,g=d(a);return i(g)?(c=g instanceof b?g._then(b.props,void 0,void 0,void 0,void 0):new f(g).promise(),g instanceof b&&c._propagateFrom(g,4),c):e("cannot await properties of a non-object\n\n    See http://goo.gl/OsFKC8\n")}var h=a("./util.js"),i=h.isObject,j=a("./es5.js");h.inherits(f,c),f.prototype._init=function(){this._init$(void 0,-3)},f.prototype._promiseFulfilled=function(a,b){this._values[b]=a;var c=++this._totalResolved;if(c>=this._length){for(var d={},e=this.length(),f=0,g=this.length();g>f;++f)d[this._values[f+e]]=this._values[f];this._resolve(d)}},f.prototype._promiseProgressed=function(a,b){this._promise._progress({key:this._values[b+this.length()],value:a})},f.prototype.shouldCopyValues=function(){return!1},f.prototype.getActualLength=function(a){return a>>1},b.prototype.props=function(){return g(this)},b.props=function(a){return g(a)}}},{"./es5.js":14,"./util.js":38}],28:[function(a,b,c){"use strict";function d(a,b,c,d,e){for(var f=0;e>f;++f)c[f+d]=a[f+b],a[f+b]=void 0}function e(a){this._capacity=a,this._length=0,this._front=0}e.prototype._willBeOverCapacity=function(a){return this._capacity<a},e.prototype._pushOne=function(a){var b=this.length();this._checkCapacity(b+1);var c=this._front+b&this._capacity-1;this[c]=a,this._length=b+1},e.prototype._unshiftOne=function(a){var b=this._capacity;this._checkCapacity(this.length()+1);var c=this._front,d=(c-1&b-1^b)-b;this[d]=a,this._front=d,this._length=this.length()+1},e.prototype.unshift=function(a,b,c){this._unshiftOne(c),this._unshiftOne(b),this._unshiftOne(a)},e.prototype.push=function(a,b,c){var d=this.length()+3;if(this._willBeOverCapacity(d))return this._pushOne(a),this._pushOne(b),void this._pushOne(c);var e=this._front+d-3;this._checkCapacity(d);var f=this._capacity-1;this[e+0&f]=a,this[e+1&f]=b,this[e+2&f]=c,this._length=d},e.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b},e.prototype.length=function(){return this._length},e.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<1)},e.prototype._resizeTo=function(a){var b=this._capacity;this._capacity=a;var c=this._front,e=this._length,f=c+e&b-1;d(this,0,this,b,f)},b.exports=e},{}],29:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a,f){var i=d(a);if(i instanceof b)return h(i);if(!g(a))return e("expecting an array, a promise or a thenable\n\n    See http://goo.gl/s8MMhc\n");var j=new b(c);void 0!==f&&j._propagateFrom(f,5);for(var k=j._fulfill,l=j._reject,m=0,n=a.length;n>m;++m){var o=a[m];(void 0!==o||m in a)&&b.cast(o)._then(k,l,void 0,j,null)}return j}var g=a("./util.js").isArray,h=function(a){return a.then(function(b){return f(b,a)})};b.race=function(a){return f(a,void 0)},b.prototype.race=function(){return f(this,void 0)}}},{"./util.js":38}],30:[function(a,b,c){"use strict";b.exports=function(b,c,d,e,f){function g(a,c,d,g){this.constructor$(a),this._promise._captureStackTrace(),this._preservedValues=g===f?[]:null,this._zerothIsAccum=void 0===d,this._gotAccum=!1,this._reducingIndex=this._zerothIsAccum?1:0,this._valuesPhase=void 0;var i=e(d,this._promise),l=!1,m=i instanceof b;m&&(i=i._target(),i._isPending()?i._proxyPromiseArray(this,-1):i._isFulfilled()?(d=i._value(),this._gotAccum=!0):(this._reject(i._reason()),l=!0)),m||this._zerothIsAccum||(this._gotAccum=!0);var n=j();this._callback=null===n?c:n.bind(c),this._accum=d,l||k.invoke(h,this,void 0)}function h(){this._init$(void 0,-5)}function i(a,b,c,e){if("function"!=typeof b)return d("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var f=new g(a,b,c,e);return f.promise()}var j=b._getDomain,k=a("./async.js"),l=a("./util.js"),m=l.tryCatch,n=l.errorObj;l.inherits(g,c),g.prototype._init=function(){},g.prototype._resolveEmptyArray=function(){(this._gotAccum||this._zerothIsAccum)&&this._resolve(null!==this._preservedValues?[]:this._accum)},g.prototype._promiseFulfilled=function(a,c){var d=this._values;d[c]=a;var f,g=this.length(),h=this._preservedValues,i=null!==h,j=this._gotAccum,k=this._valuesPhase;if(!k)for(k=this._valuesPhase=new Array(g),f=0;g>f;++f)k[f]=0;if(f=k[c],0===c&&this._zerothIsAccum?(this._accum=a,this._gotAccum=j=!0,k[c]=0===f?1:2):-1===c?(this._accum=a,this._gotAccum=j=!0):0===f?k[c]=1:(k[c]=2,this._accum=a),j){for(var l,o=this._callback,p=this._promise._boundValue(),q=this._reducingIndex;g>q;++q)if(f=k[q],2!==f){if(1!==f)return;if(a=d[q],this._promise._pushContext(),i?(h.push(a),l=m(o).call(p,a,q,g)):l=m(o).call(p,this._accum,a,q,g),this._promise._popContext(),l===n)return this._reject(l.e);var r=e(l,this._promise);if(r instanceof b){if(r=r._target(),r._isPending())return k[q]=4,r._proxyPromiseArray(this,q);if(!r._isFulfilled())return this._reject(r._reason());l=r._value()}this._reducingIndex=q+1,this._accum=l}else this._reducingIndex=q+1;this._resolve(i?h:this._accum)}},b.prototype.reduce=function(a,b){return i(this,a,b,null)},b.reduce=function(a,b,c,d){return i(a,b,c,d)}}},{"./async.js":2,"./util.js":38}],31:[function(a,b,c){"use strict";var e,f=a("./util"),g=function(){throw new Error("No async scheduler available\n\n    See http://goo.gl/m3OTXk\n")};if(f.isNode&&"undefined"==typeof MutationObserver){var h=d.setImmediate,i=process.nextTick;e=f.isRecentNode?function(a){h.call(d,a)}:function(a){i.call(process,a)}}else"undefined"==typeof MutationObserver||"undefined"!=typeof window&&window.navigator&&window.navigator.standalone?e="undefined"!=typeof setImmediate?function(a){setImmediate(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:g:(e=function(a){var b=document.createElement("div"),c=new MutationObserver(a);return c.observe(b,{attributes:!0}),function(){b.classList.toggle("foo")}},e.isStatic=!0);b.exports=e},{"./util":38}],32:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){this.constructor$(a)}var e=b.PromiseInspection,f=a("./util.js");f.inherits(d,c),d.prototype._promiseResolved=function(a,b){this._values[a]=b;var c=++this._totalResolved;c>=this._length&&this._resolve(this._values)},d.prototype._promiseFulfilled=function(a,b){var c=new e;c._bitField=268435456,c._settledValue=a,this._promiseResolved(b,c)},d.prototype._promiseRejected=function(a,b){var c=new e;c._bitField=134217728,c._settledValue=a,this._promiseResolved(b,c)},b.settle=function(a){return new d(a).promise()},b.prototype.settle=function(){return new d(this).promise()}}},{"./util.js":38}],33:[function(a,b,c){"use strict";b.exports=function(b,c,d){function e(a){this.constructor$(a),this._howMany=0,this._unwrap=!1,this._initialized=!1}function f(a,b){if((0|b)!==b||0>b)return d("expecting a positive integer\n\n    See http://goo.gl/1wAmHx\n");var c=new e(a),f=c.promise();return c.setHowMany(b),c.init(),f}var g=a("./util.js"),h=a("./errors.js").RangeError,i=a("./errors.js").AggregateError,j=g.isArray;g.inherits(e,c),e.prototype._init=function(){if(this._initialized){if(0===this._howMany)return void this._resolve([]);this._init$(void 0,-5);var a=j(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}},e.prototype.init=function(){this._initialized=!0,this._init()},e.prototype.setUnwrap=function(){this._unwrap=!0},e.prototype.howMany=function(){return this._howMany},e.prototype.setHowMany=function(a){this._howMany=a},e.prototype._promiseFulfilled=function(a){this._addFulfilled(a),this._fulfilled()===this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values))},e.prototype._promiseRejected=function(a){if(this._addRejected(a),this.howMany()>this._canPossiblyFulfill()){for(var b=new i,c=this.length();c<this._values.length;++c)b.push(this._values[c]);this._reject(b)}},e.prototype._fulfilled=function(){return this._totalResolved},e.prototype._rejected=function(){return this._values.length-this.length()},e.prototype._addRejected=function(a){this._values.push(a)},e.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a},e.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()},e.prototype._getRangeError=function(a){var b="Input array must contain at least "+this._howMany+" items but contains only "+a+" items";return new h(b)},e.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))},b.some=function(a,b){return f(a,b)},b.prototype.some=function(a){return f(this,a)},b._SomePromiseArray=e}},{"./errors.js":13,"./util.js":38}],34:[function(a,b,c){"use strict";b.exports=function(a){function b(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValue=a._settledValue):(this._bitField=0,this._settledValue=void 0)}b.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return this._settledValue},b.prototype.error=b.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return this._settledValue},b.prototype.isFulfilled=a.prototype._isFulfilled=function(){return(268435456&this._bitField)>0},b.prototype.isRejected=a.prototype._isRejected=function(){return(134217728&this._bitField)>0},b.prototype.isPending=a.prototype._isPending=function(){return 0===(402653184&this._bitField)},b.prototype.isResolved=a.prototype._isResolved=function(){return(402653184&this._bitField)>0},a.prototype.isPending=function(){return this._target()._isPending()},a.prototype.isRejected=function(){return this._target()._isRejected()},a.prototype.isFulfilled=function(){return this._target()._isFulfilled()},a.prototype.isResolved=function(){return this._target()._isResolved()},a.prototype._value=function(){return this._settledValue},a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue},a.prototype.value=function(){var a=this._target();if(!a.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/hc1DLj\n");return a._settledValue},a.prototype.reason=function(){var a=this._target();if(!a.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/hPuiwB\n");return a._unsetRejectionIsUnhandled(),a._settledValue},a.PromiseInspection=b}},{}],35:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a,d){if(j(a)){if(a instanceof b)return a;if(f(a)){var k=new b(c);return a._then(k._fulfillUnchecked,k._rejectUncheckedCheckError,k._progressUnchecked,k,null),k}var l=h.tryCatch(e)(a);if(l===i){d&&d._pushContext();var k=b.reject(l.e);return d&&d._popContext(),k}if("function"==typeof l)return g(a,l,d)}return a}function e(a){return a.then}function f(a){return k.call(a,"_promise0")}function g(a,d,e){function f(a){k&&(k._resolveCallback(a),k=null)}function g(a){k&&(k._rejectCallback(a,m,!0),k=null)}function j(a){k&&"function"==typeof k._progress&&k._progress(a)}var k=new b(c),l=k;e&&e._pushContext(),k._captureStackTrace(),e&&e._popContext();var m=!0,n=h.tryCatch(d).call(a,f,g,j);return m=!1,k&&n===i&&(k._rejectCallback(n.e,!0,!0),k=null),l}var h=a("./util.js"),i=h.errorObj,j=h.isObject,k={}.hasOwnProperty;return d}},{"./util.js":38}],36:[function(a,b,c){"use strict";b.exports=function(b,c){function d(a){var b=this;return b instanceof Number&&(b=+b),clearTimeout(b),a}function e(a){var b=this;throw b instanceof Number&&(b=+b),clearTimeout(b),a}var f=a("./util.js"),g=b.TimeoutError,h=function(a,b){if(a.isPending()){var c;!f.isPrimitive(b)&&b instanceof Error?c=b:("string"!=typeof b&&(b="operation timed out"),c=new g(b)),f.markAsOriginatingFromRejection(c),a._attachExtraTrace(c),a._cancel(c)}},i=function(a){return j(+this).thenReturn(a)},j=b.delay=function(a,d){if(void 0===d){d=a,a=void 0;var e=new b(c);return setTimeout(function(){e._fulfill()},d),e}return d=+d,b.resolve(a)._then(i,null,null,d,void 0)};b.prototype.delay=function(a){return j(this,a)},b.prototype.timeout=function(a,b){a=+a;var c=this.then().cancellable();c._cancellationParent=this;var f=setTimeout(function(){h(c,b)},a);return c._then(d,e,void 0,f,void 0)}}},{"./util.js":38}],37:[function(a,b,c){"use strict";b.exports=function(b,c,d,e){function f(a){for(var c=a.length,d=0;c>d;++d){var e=a[d];if(e.isRejected())return b.reject(e.error());a[d]=e._settledValue}return a}function g(a){setTimeout(function(){throw a},0)}function h(a){var b=d(a);return b!==a&&"function"==typeof a._isDisposable&&"function"==typeof a._getDisposer&&a._isDisposable()&&b._setDisposable(a._getDisposer()),b}function i(a,c){function e(){if(f>=i)return j.resolve();var k=h(a[f++]);if(k instanceof b&&k._isDisposable()){try{k=d(k._getDisposer().tryDispose(c),a.promise)}catch(l){return g(l)}if(k instanceof b)return k._then(e,g,null,null,null)}e()}var f=0,i=a.length,j=b.defer();return e(),j.promise}function j(a){var b=new q;return b._settledValue=a,b._bitField=268435456,i(this,b).thenReturn(a)}function k(a){var b=new q;return b._settledValue=a,b._bitField=134217728,i(this,b).thenThrow(a)}function l(a,b,c){this._data=a,this._promise=b,this._context=c}function m(a,b,c){this.constructor$(a,b,c)}function n(a){return l.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}var o=a("./errors.js").TypeError,p=a("./util.js").inherits,q=b.PromiseInspection;l.prototype.data=function(){return this._data},l.prototype.promise=function(){return this._promise},l.prototype.resource=function(){return this.promise().isFulfilled()?this.promise().value():null},l.prototype.tryDispose=function(a){var b=this.resource(),c=this._context;void 0!==c&&c._pushContext();var d=null!==b?this.doDispose(b,a):null;return void 0!==c&&c._popContext(),this._promise._unsetDisposable(),this._data=null,d},l.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose},p(m,l),m.prototype.doDispose=function(a,b){var c=this.data();return c.call(a,a,b)},b.using=function(){var a=arguments.length;if(2>a)return c("you must pass at least 2 arguments to Promise.using");var e=arguments[a-1];if("function"!=typeof e)return c("fn must be a function\n\n    See http://goo.gl/916lJJ\n");var g,h=!0;2===a&&Array.isArray(arguments[0])?(g=arguments[0],a=g.length,h=!1):(g=arguments,a--);for(var i=new Array(a),m=0;a>m;++m){var o=g[m];if(l.isDisposer(o)){var p=o;o=o.promise(),o._setDisposable(p)}else{var q=d(o);q instanceof b&&(o=q._then(n,null,null,{resources:i,index:m},void 0))}i[m]=o}var r=b.settle(i).then(f).then(function(a){r._pushContext();var b;try{b=h?e.apply(void 0,a):e.call(void 0,a)}finally{r._popContext()}return b})._then(j,k,void 0,i,void 0);return i.promise=r,r},b.prototype._setDisposable=function(a){this._bitField=262144|this._bitField,this._disposer=a},b.prototype._isDisposable=function(){return(262144&this._bitField)>0},b.prototype._getDisposer=function(){return this._disposer},b.prototype._unsetDisposable=function(){this._bitField=-262145&this._bitField,this._disposer=void 0},b.prototype.disposer=function(a){if("function"==typeof a)return new m(a,this,e());throw new o}}},{"./errors.js":13,"./util.js":38}],38:[function(a,b,c){"use strict";function d(){try{var a=A;return A=null,a.apply(this,arguments)}catch(b){return z.e=b,z}}function e(a){return A=a,d}function f(a){return null==a||a===!0||a===!1||"string"==typeof a||"number"==typeof a}function g(a){return!f(a)}function h(a){return f(a)?new Error(q(a)):a}function i(a,b){var c,d=a.length,e=new Array(d+1);for(c=0;d>c;++c)e[c]=a[c];return e[c]=b,e}function j(a,b,c){if(!w.isES5)return{}.hasOwnProperty.call(a,b)?a[b]:void 0;var d=Object.getOwnPropertyDescriptor(a,b);return null!=d?null==d.get&&null==d.set?d.value:c:void 0}function k(a,b,c){if(f(a))return a;var d={value:c,configurable:!0,enumerable:!1,writable:!0};return w.defineProperty(a,b,d),a}function l(a){throw a}function m(a){try{if("function"==typeof a){var b=w.names(a.prototype),c=w.isES5&&b.length>1,d=b.length>0&&!(1===b.length&&"constructor"===b[0]),e=D.test(a+"")&&w.names(a).length>0;
if(c||d||e)return!0}return!1}catch(f){return!1}}function n(a){function b(){}b.prototype=a;for(var c=8;c--;)new b;return a}function o(a){return E.test(a)}function p(a,b,c){for(var d=new Array(a),e=0;a>e;++e)d[e]=b+e+c;return d}function q(a){try{return a+""}catch(b){return"[no string representation]"}}function r(a){try{k(a,"isOperational",!0)}catch(b){}}function s(a){return null==a?!1:a instanceof Error.__BluebirdErrorTypes__.OperationalError||a.isOperational===!0}function t(a){return a instanceof Error&&w.propertyIsWritable(a,"stack")}function u(a){return{}.toString.call(a)}function v(a,b,c){for(var d=w.names(a),e=0;e<d.length;++e){var f=d[e];if(c(f))try{w.defineProperty(b,f,w.getDescriptor(a,f))}catch(g){}}}var w=a("./es5.js"),x="undefined"==typeof navigator,y=function(){try{var a={};return w.defineProperty(a,"f",{get:function(){return 3}}),3===a.f}catch(b){return!1}}(),z={e:{}},A,B=function(a,b){function c(){this.constructor=a,this.constructor$=b;for(var c in b.prototype)d.call(b.prototype,c)&&"$"!==c.charAt(c.length-1)&&(this[c+"$"]=b.prototype[c])}var d={}.hasOwnProperty;return c.prototype=b.prototype,a.prototype=new c,a.prototype},C=function(){var a=[Array.prototype,Object.prototype,Function.prototype],b=function(b){for(var c=0;c<a.length;++c)if(a[c]===b)return!0;return!1};if(w.isES5){var c=Object.getOwnPropertyNames;return function(a){for(var d=[],e=Object.create(null);null!=a&&!b(a);){var f;try{f=c(a)}catch(g){return d}for(var h=0;h<f.length;++h){var i=f[h];if(!e[i]){e[i]=!0;var j=Object.getOwnPropertyDescriptor(a,i);null!=j&&null==j.get&&null==j.set&&d.push(i)}}a=w.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(c){if(b(c))return[];var e=[];a:for(var f in c)if(d.call(c,f))e.push(f);else{for(var g=0;g<a.length;++g)if(d.call(a[g],f))continue a;e.push(f)}return e}}(),D=/this\s*\.\s*\S+\s*=/,E=/^[a-z$_][a-z$_0-9]*$/i,F=function(){return"stack"in new Error?function(a){return t(a)?a:new Error(q(a))}:function(a){if(t(a))return a;try{throw new Error(q(a))}catch(b){return b}}}(),G={isClass:m,isIdentifier:o,inheritedDataKeys:C,getDataPropertyOrDefault:j,thrower:l,isArray:w.isArray,haveGetters:y,notEnumerableProp:k,isPrimitive:f,isObject:g,canEvaluate:x,errorObj:z,tryCatch:e,inherits:B,withAppended:i,maybeWrapAsError:h,toFastProperties:n,filledRange:p,toString:q,canAttachTrace:t,ensureErrorObject:F,originatesFromRejection:s,markAsOriginatingFromRejection:r,classString:u,copyDescriptors:v,hasDevTools:"undefined"!=typeof chrome&&chrome&&"function"==typeof chrome.loadTimes,isNode:"undefined"!=typeof process&&"[object process]"===u(process).toLowerCase()};G.isRecentNode=G.isNode&&function(){var a=process.versions.node.split(".").map(Number);return 0===a[0]&&a[1]>10||a[0]>0}(),G.isNode&&G.toFastProperties(process);try{throw new Error}catch(H){G.lastLineError=H}b.exports=G},{"./es5.js":14}]},{},[4])(4)}),"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)},"./node_modules/spotify-live/node_modules/mout/object/hasOwn.js":function(a,b,c,d){function e(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=e},"./node_modules/spotify-live/node_modules/mout/object/forOwn.js":function(a,b,c,d){function e(a,b,c){g(a,function(d,e){return f(a,e)?b.call(c,a[e],e,a):void 0})}var f=a("./node_modules/spotify-live/node_modules/mout/object/hasOwn.js"),g=a("./node_modules/spotify-live/node_modules/mout/object/forIn.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/unique.js":function(a,b,c,d){function e(a,b){return b=b||f,g(a,function(a,c,d){for(var e=d.length;++c<e;)if(b(a,d[c]))return!1;return!0})}function f(a,b){return a===b}var g=a("./node_modules/spotify-live/node_modules/mout/array/filter.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/some.js":function(a,b,c,d){function e(a,b,c){b=f(b,c);var d=!1;if(null==a)return d;for(var e=-1,g=a.length;++e<g;)if(b(a[e],e,a)){d=!0;break}return d}var f=a("./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/contains.js":function(a,b,c,d){function e(a,b){return-1!==f(a,b)}var f=a("./node_modules/spotify-live/node_modules/mout/array/indexOf.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/indexOf.js":function(a,b,c,d){function e(a,b,c){if(c=c||0,null==a)return-1;for(var d=a.length,e=0>c?d+c:c;d>e;){if(a[e]===b)return e;e++}return-1}b.exports=e},"./node_modules/spotify-cosmos-api/scripts/resolver.js":function(a,b,c,d){function e(a){return a>=200&&299>=a}function f(a){if(!a||"function"!=typeof a.resolve)throw TypeError("Incorrect resolver argument");this._resolver=a}function g(a){if(!a||"function"!=typeof a.close)throw new TypeError("Invalid `request` argument.");this._request=a}var h=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/index.js"),i=h.request.Request,j=h.request.Action,k=h.response.Response;f.prototype.resolve=function(a,b){return this._resolve(a,b)},f.prototype.get=function(a,b){return this._resolveFromParams(j.GET,a,b)},f.prototype.post=function(a,b){return this._resolveFromParams(j.POST,a,b)},f.prototype.subscribe=function(a,b){return this._resolveFromParams(j.SUB,a,b)},f.prototype.patch=function(a,b){return this._resolveFromParams(j.PATCH,a,b)},f.prototype["delete"]=function(a,b){return this._resolveFromParams(j.DELETE,a,b)},f.prototype._resolve=function(a,b){function c(a){if(f._request){var c=k.fromObject(a);if(!c){var d=new Error("Failed to parse response: "+JSON.stringify(a));return b(d)}if(e(c.getStatusCode()))return b(null,c);var g=c.getHeader("error")||"Request failed with status code "+c.getStatusCode(),d=new Error(g);return d.response=c,b(d,c)}}function d(a){return b(a instanceof Error?a:new Error("Request failed: "+JSON.stringify(a)))}b&&"function"==typeof b||(b=function(){});var f,h=a.getAction()===j.SUB?this._resolver.subscribe:this._resolver.resolve,i=h.call(this._resolver,a,c,d);return f=new g(i)},f.prototype._resolveFromParams=function(a,b,c){b=b||{};var d="string"==typeof b?b:b.url,e=b.headers,f=b.body,g=new i(a,d,e,f);return this._resolve(g,c)},g.prototype.cancel=function(){this._request&&(this._request.close(),this._request=null)},c.Resolver=f},"./node_modules/spotify-cosmos-api/env/bootstrap.native.js":function(a,b,c,d){"use strict";function e(a){if(!(this instanceof e))return new e;if(!a)throw new TypeError("Missing `spBridge` parameter");h.call(this),this._bridge=a,this._deferredFlush=!1}var f=d.SpotifyApi,g=!(!f||!f.api||"function"!=typeof f.api.request),h=a("./node_modules/spotify-cosmos-api/env/bootstrap.js").Resolver,i=a("./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/src/deferred.js");e.prototype=new h,e.prototype.constructor=e,c.NativeResolver=e,e.prototype._prepareCoreFlush=function(){this._deferredFlush||(this._deferredFlush=!0,this._defer(this,this._flushRequests))},e.prototype._flushRequests=function(){this._deferredFlush=!1;var a=JSON.stringify({name:"core_flush",args:[]});this._sendBridgeRequest(a,{onSuccess:function(){},onFailure:function(){}})},e.prototype._defer=function(a,b){i(b.bind(a))},e.prototype._sendRequest=function(a,b,c){c=c.serialize?c.serialize():c;var d=[b,c],e={self:this,id:b,type:a};g?this._sendApiRequest(a,d,e,this._handleResponse,this._handleError):this._sendCosmosRequest(a,d,e,this._handleResponse,this._handleError)},e.prototype._sendCosmosRequest=function(a,b,c,d,e){var f=JSON.stringify({name:a,args:b});this._sendBridgeRequest(f,{onSuccess:function(a){d.call(c,JSON.parse(a))},onFailure:function(a){a=JSON.parse(a),e.call(c,a)}}),this._prepareCoreFlush()},e.prototype._sendBridgeRequest=function(a,b){this._bridge.executeRequest(a,b||{})},e.prototype._sendApiRequest=function(a,b,c,d,e){f.api.request(a,b,c,d,e)},e.prototype._handleResponse=function(a){this.self._dispatchResponse(this.id,this.type,a.responses&&a.responses[0]||a)},e.prototype._handleError=function(a){this.self._dispatchResponse(this.id,this.type,a)},e.prototype.resolve=function(a,b,c){function d(a,b){this._defer(this,a.bind(this,b)),e.close()}var e=this._resolve(a,d.bind(this,b),d.bind(this,c));return e},e.prototype.subscribe=function(a,b,c){function d(a,b){a.call(this,b),e.pull()}var e=this._resolve(a,d.bind(this,b),d.bind(this,c));return e}},"./node_modules/spotify-cosmos-api/env/bootstrap.web.js":function(a,b,c,d){"use strict";function e(a){return this instanceof e?(g.call(this),this._target=a||"*",this._handleResponse=this._handleResponse.bind(this),this._requestMessageType="cosmos-request",this._responseMessageType="cosmos-response",this._requestIdPrefix="cosmos_",void this.attach()):new e(a)}var f=a("./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/src/deferred.js"),g=a("./node_modules/spotify-cosmos-api/env/bootstrap.js").Resolver;e.prototype=new g,e.prototype.constructor=e,c.WebResolver=e,e.prototype._sendRequest=function(a,b,c){var e=d.window.top,f={type:this._requestMessageType,resolver:this._id,id:this._requestIdPrefix+b,name:a,payload:c.serialize?c.serialize():c};e.postMessage(JSON.stringify(f),this._target)},e.prototype._handleResponse=function(a){var b=a.data;if("string"==typeof b)try{b=JSON.parse(a.data)}catch(c){return}if(b.type==this._responseMessageType&&b.resolver==this._id&&b.payload){var d=b.id||"",e=parseInt(d.replace(this._requestIdPrefix,""),10),f=b.name||"";e&&f&&this._dispatchResponse(e,f,b.payload)}},e.prototype.attach=function(){var a=d.window;a.addEvent&&!a.addEventListener?a.addEvent("onmessage",this._handleResponse):a.addEventListener("message",this._handleResponse,!1)},e.prototype.detach=function(){var a=d.window;a.removeEvent&&!a.removeEventListener?a.removeEvent("onmessage",this._handleResponse):a.removeEventListener("message",this._handleResponse,!1)},e.prototype.resolve=function(a,b,c){function d(a,b){f(a.bind(this,b)),e.close()}var e=this._resolve(a,d.bind(this,b),d.bind(this,c));return e},e.prototype.subscribe=function(a,b,c){return this._resolve(a,b,c)}},"./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js":function(a,b,c,d){function e(a,b){if(null==a)return f;switch(typeof a){case"function":return"undefined"!=typeof b?function(c,d,e){return a.call(b,c,d,e)}:a;case"object":return function(b){return h(b,a)};case"string":case"number":return g(a)}}var f=a("./node_modules/spotify-live/node_modules/mout/function/identity.js"),g=a("./node_modules/spotify-live/node_modules/mout/function/prop.js"),h=a("./node_modules/spotify-live/node_modules/mout/object/deepMatches.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/array/reduce.js":function(a,b,c,d){function e(a,b,c){var d=arguments.length>2,e=c;if(null==a||!a.length){if(d)return c;throw new Error("reduce of empty array with no initial value")}for(var f=-1,g=a.length;++f<g;)d?e=b(e,a[f],f,a):(e=a[f],d=!0);return e}b.exports=e},"./node_modules/spotify-live/node_modules/mout/lang/createObject.js":function(a,b,c,d){function e(a,b){function c(){}return c.prototype=a,f(new c,b)}var f=a("./node_modules/spotify-live/node_modules/mout/object/mixIn.js");b.exports=e},"./node_modules/spotify-live-models/node_modules/mout/array/indexOf.js":function(a,b,c,d){function e(a,b,c){if(c=c||0,null==a)return-1;for(var d=a.length,e=0>c?d+c:c;d>e;){if(a[e]===b)return e;e++}return-1}b.exports=e},"./node_modules/spotify-live/node_modules/mout/collection/forEach.js":function(a,b,c,d){var e=a("./node_modules/spotify-live/node_modules/mout/collection/make_.js"),f=a("./node_modules/spotify-live/node_modules/mout/array/forEach.js"),g=a("./node_modules/spotify-live/node_modules/mout/object/forOwn.js");b.exports=e(f,g)},"./node_modules/spotify-live/node_modules/mout/collection/map.js":function(a,b,c,d){function e(a,b,c){return b=i(b,c),f(a)&&null==a.length&&(a=g(a)),h(a,function(a,c,d){return b(a,c,d)})}var f=a("./node_modules/spotify-live/node_modules/mout/lang/isObject.js"),g=a("./node_modules/spotify-live/node_modules/mout/object/values.js"),h=a("./node_modules/spotify-live/node_modules/mout/array/map.js"),i=a("./node_modules/spotify-live/node_modules/mout/function/makeIterator_.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/time/now.js":function(a,b,c,d){function e(){return e.get()}e.get="function"==typeof Date.now?Date.now:function(){return+new Date},b.exports=e},"./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/index.js":function(a,b,c,d){"use strict";c.message=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/message.js"),c.request=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/request.js"),c.response=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/response.js"),c.playerstate=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/player_state.js")},"./node_modules/spotify-cosmos-api/env/bootstrap.js":function(a,b,c,d){"use strict";function e(){return this instanceof e?(this._id=g++,this._requestID=0,void(this._handlers={})):new e}var f=a("./node_modules/spotify-cosmos-api/env/request.js").ClientRequest,g=0;c.Resolver=e,e.prototype._addHandler=function(a,b){return this._handlers[a]=b,this},e.prototype._removeHandler=function(a){return this._handlers[a]=null,this},e.prototype._sendRequest=function(a,b){throw new Error("Resolver _sendRequest not implemented.")},e.prototype._handleResponse=function(a){throw new Error("Resolver _handleResponse not implemented.")},e.prototype._dispatchResponse=function(a,b,c){var d=this._handlers[a];d&&d._handleResponse(b,c)},e.prototype._resolve=function(a,b,c){if(!a||!b||!c||"function"!=typeof b||"function"!=typeof c)throw new TypeError("Invalid argument length for `resolve`.");var d=++this._requestID,e=new f(this,d,a,b,c);return this._addHandler(d,e),e.onClose=this._removeHandler.bind(this),e.open(),e},e.prototype.resolve=function(a,b,c){throw new Error("Resolver resolve not implemented.")},e.prototype.subscribe=function(a,b,c){throw new Error("Resolver subscribe not implemented.")}},"./node_modules/spotify-live/node_modules/mout/function/identity.js":function(a,b,c,d){function e(a){return a}b.exports=e},"./node_modules/spotify-live/node_modules/mout/function/prop.js":function(a,b,c,d){function e(a){return function(b){return b[a]}}b.exports=e},"./node_modules/spotify-live/node_modules/mout/object/deepMatches.js":function(a,b,c,d){function e(a,b){for(var c=-1,d=a.length;++c<d;)if(h(a[c],b))return!0;return!1}function f(a,b){for(var c=-1,d=b.length;++c<d;)if(!e(a,b[c]))return!1;return!0}function g(a,b){var c=!0;return i(b,function(b,d){return h(a[d],b)?void 0:c=!1}),c}function h(a,b){return a&&"object"==typeof a?j(a)&&j(b)?f(a,b):g(a,b):a===b}var i=a("./node_modules/spotify-live/node_modules/mout/object/forOwn.js"),j=a("./node_modules/spotify-live/node_modules/mout/lang/isArray.js");b.exports=h},"./node_modules/spotify-live/node_modules/mout/lang/isObject.js":function(a,b,c,d){function e(a){return f(a,"Object")}var f=a("./node_modules/spotify-live/node_modules/mout/lang/isKind.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/object/values.js":function(a,b,c,d){function e(a){var b=[];return f(a,function(a,c){b.push(a)}),b}var f=a("./node_modules/spotify-live/node_modules/mout/object/forOwn.js");b.exports=e},"./node_modules/spotify-live/node_modules/mout/collection/make_.js":function(a,b,c,d){function e(a,b,c){return function(){var d=f(arguments);return null==d[0]?c:"number"==typeof d[0].length?a.apply(null,d):b.apply(null,d)}}var f=a("./node_modules/spotify-live/node_modules/mout/array/slice.js");b.exports=e},"./node_modules/spotify-live-models/node_modules/spotify-liburi/node_modules/spotify-crypto/src/base62.js":function(a,b,c,d){"use strict";function e(a,b,c){for(var d=0,e=0;e<a.length;++e){var f=a[e]*b+d;a[e]=f%c,d=~~(f/c)}for(;d;)a.push(d%c),d=~~(d/c)}function f(a,b,c,d){for(var e=0,f=0;f<b.length;++f){var g=~~a[f]+b[f]*c+e;a[f]=g%d,e=~~(g/d)}for(;e;){var g=~~a[f]+e;a[f]=g%d,e=~~(g/d),++f}}function g(a,b,c){for(var d=[0],g=[1],h=0;h<a.length;++h)f(d,g,a[h],c),e(g,b,c);return d}function h(a,b){for(var c=0,d=[];c<a.length;++c)d.push(b[a[c]]);return d.reverse()}function i(a,b){for(;a.length<b;)a.push(0);return a}for(var j="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",k={},l={},m=0;m<j.length;++m)l[j[m]]=m;for(var m=0;16>m;++m)k["0123456789abcdef"[m]]=m;for(var m=0;16>m;++m)k["0123456789ABCDEF"[m]]=m;b.exports={fromBytes:function(a,b){var c=g(a.slice(0).reverse(),256,62);return h(i(c,b),j).join("")},toBytes:function(a,b){var c=g(h(a,l),62,256);return i(c,b).reverse()},toHex:function(a,b){var c=g(h(a,l),62,16);return h(i(c,b),j).join("")},fromHex:function(a,b){var c=g(h(a,k),16,62);return h(i(c,b),j).join("")}}},"./node_modules/spotify-cosmos-api/env/request.js":function(a,b,c,d){"use strict";function e(a,b,c,d,f){this._requestId=b,this._resolver=a,this._requestData=c,this._successCallback=d,this._errorCallback=f,this._status=e.status.INITIALIZED}var f=a("./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/src/deferred.js");c.ClientRequest=e,e.status={INITIALIZED:"INITIALIZED",CLOSED:"CLOSED",OPEN:"OPEN"},e.messages={OPEN:"cosmos_request_create",PULL:"cosmos_request_pull",CLOSE:"cosmos_request_cancel"},e.prototype.open=function(){this._status===e.status.INITIALIZED&&(this._status=e.status.OPEN,this._sendRequest(e.messages.OPEN,this._requestData))},e.prototype.pull=function(){return this._status===e.status.OPEN&&this._sendRequest(e.messages.PULL,this._requestData),this._status},e.prototype.close=function(){this._status===e.status.OPEN&&(this._status=e.status.CLOSE,this._sendRequest(e.messages.CLOSE))},e.prototype.onClose=function(){},e.prototype._sendRequest=function(a,b){this._resolver._sendRequest(a,this._requestId,b||{})},e.prototype._handleResponse=function(a,b){var c;b&&b.status;return a===e.messages.CLOSE?(this._successCallback=null,this._errorCallback=null,this._requestData=null,void this.onClose(this._requestId)):(c=this._successCallback,c="function"==typeof c?c:function(){},void f(c.bind(this,b)))}},"./node_modules/spotify-live/node_modules/mout/lang/isArray.js":function(a,b,c,d){var e=a("./node_modules/spotify-live/node_modules/mout/lang/isKind.js"),f=Array.isArray||function(a){return e(a,"Array")};b.exports=f},"./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/message.js":function(a,b,c,d){function e(a,b,c){if(null==a)throw new TypeError("Invalid `uri` argument for Message.");this._uri=a,this._headers={},this._body=this._encodeBody(c||""),b&&this._setHeaders(b)}c.Headers,c.Body,c.SerializedMessage,c.Message=e,e.fromObject=function(a){return a&&a.uri?new e(a.uri,a.headers,a.body):null},e.prototype._encodeBody=function(a){return"string"!=typeof a&&(a=JSON.stringify(a)),a},e.prototype.getURI=function(){return this._uri},e.prototype.getMimeType=function(){return this._headers.accept},e.prototype.getHeader=function(a){return this._headers[a.toLowerCase()]||null},e.prototype.getHeaders=function(){var a=this._headers,b={};for(var c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b},e.prototype._setHeaders=function(a){var b=this._headers;for(var c in a)a.hasOwnProperty(c)&&(b[c.toLowerCase()]=a[c]);return this},e.prototype.getBody=function(){return this._body},e.prototype.getJSONBody=function(){try{return JSON.parse(this._body)}catch(a){return null}},e.prototype.copy=function(a,b){return new e(this._uri,this._copyHeaders(a),"undefined"!=typeof b?b:this._body)},e.prototype._copyHeaders=function(a){var b;if(a){var c,d=this._headers;b={};for(c in d)d.hasOwnProperty(c)&&(b[c]=d[c]);for(c in a)a.hasOwnProperty(c)&&(b[c.toLowerCase()]=a[c])}else b=this._headers;return b},e.prototype.serialize=function(){return this.toJSON()},e.prototype.toJSON=function(){return{uri:this._uri,headers:this._headers,body:this._body}}},"./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/request.js":function(a,b,c,d){function e(a,b,c,d){if(!(this instanceof e))return new e(a,b,c,d);if(!a)throw new TypeError("Invalid `action` argument for Request.");g.call(this,b,c,d),this._action=a}var f=a("./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/index.js").inherit,g=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/message.js").Message;c.Action={DELETE:"DELETE",GET:"GET",HEAD:"HEAD",POST:"POST",PUT:"PUT",SUB:"SUB",PATCH:"PATCH"},c.SerializedRequest,f(e,g),c.Request=e,e.fromObject=function(a){return a&&a.action&&a.uri?new e(a.action,a.uri,a.headers,a.body):null},e.prototype.getAction=function(){return this._action},e.prototype.copy=function(a,b){return new e(this._action,this._uri,this._copyHeaders(a),"undefined"!=typeof b?b:this._body)},e.prototype.toJSON=function(){return{action:this._action,uri:this._uri,headers:this._headers,body:this._body}}},"./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/response.js":function(a,b,c,d){function e(a,b,c,d){if(!(this instanceof e))return new e(a,b,c,d,opt_requestURI);if("undefined"==typeof b||null==b)throw new TypeError("Invalid `status` argument for Response.");g.call(this,a,c,d),this._status=b}var f=a("./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/index.js").inherit,g=a("./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/message.js").Message;c.StatusCode={OK:200,CREATED:201,ACCEPTED:202,BAD_REQUEST:400,UNAUTHORIZED:401,FORBIDDEN:403,NOT_FOUND:404,METHOD_NOT_ALLOWED:405,TIMED_OUT:408,CONFLICT:409,GONE:410,INTERNAL_SERVER_ERROR:500,NOT_IMPLEMENTED:501,BAD_GATEWAY:502,SERVICE_UNAVAILABLE:503,ERROR_UNKNOWN:-100,ERROR_ALLOCATION_FAILED:-101,ERROR_INVALID_ENCODING:-102,ERROR_INFINITE_LOOP:-103,ERROR_RESOLVER_NOT_FOUND:-104},c.SerializedResponse,f(e,g),c.Response=e,e.fromObject=function(a){return a&&a.uri&&a.status?new e(a.uri,a.status,a.headers,a.body):null},e.prototype.getMimeType=function(){return this._headers["content-type"]},e.prototype.getStatusCode=function(){return this._status},e.prototype.copy=function(a,b){return new e(this._uri,this._status,this._copyHeaders(a),"undefined"!=typeof b?b:this._body)},e.prototype.toJSON=function(){return{uri:this._uri,status:this._status,headers:this._headers,body:this._body}}},"./node_modules/spotify-cosmos-api/node_modules/cosmos-common-js/src/player_state.js":function(a,b,c,d){function e(a){h.call(this,["action","context","tracks","index","playing","loading","track","position","duration","volume","options","play_origin","next_page_url","prev_page_url"]),a=a||{},this.action=a.action,this.context=a.context,this.tracks=a.tracks,this.index=a.index,this.playing=a.playing,this.loading=a.loading,this.track=a.track,this.position=a.position,this.volume=a.volume,this.duration=a.duration,this.options=new g(a.options),this.play_origin=new f(a.play_origin),this.next_page_url=a.next_page_url,this.prev_page_url=a.prev_page_url}function f(a){h.call(this,["source","source_context","reason","referrer","referrer_version","referrer_vendor"]),a=a||{},this.source=a.source||"unknown",this.source_context=a.source_context||"unknown",this.reason=a.reason||"unknown",this.referrer=a.referrer||"unknown",this.referrer_version=a.referrer_version||"unknown",this.referrer_vendor=a.referrer_vendor||"unknown"}function g(a){h.call(this,["repeat","shuffle","can_repeat","can_shuffle","can_skip_prev","can_skip_next","can_seek","use_dmca_rules"]),a=a||{},this.repeat=void 0!==a.repeat?a.repeat:!1,this.shuffle=void 0!==a.shuffle?a.shuffle:!1,this.can_repeat=void 0!==a.can_repeat?a.can_repeat:!0,this.can_shuffle=void 0!==a.can_shuffle?a.can_shuffle:!0,this.can_skip_prev=void 0!==a.can_skip_prev?a.can_skip_prev:!0,this.can_skip_next=void 0!==a.can_skip_next?a.can_skip_next:!0,this.can_seek=void 0!==a.can_seek?a.can_seek:!0,this.use_dmca_rules=void 0!==a.use_dmca_rules?a.use_dmca_rules:!1}function h(a){this._props=a||[]}var i=a("./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/index.js").inherit;i(e,h),e.prototype.serialize=function(){return!this.options||this.options instanceof g||(this.options=new g(this.options)),!this.play_origin||this.play_origin instanceof f||(this.play_origin=new f(this.play_origin)),this.constructor.prototype.serialize.call(this)},e.ACTIONS={UNKNOWN:"unknown",PLAY:"play",UPDATE:"update",STOP:"stop",RESUME:"resume",PAUSE:"pause",SKIP_PREV:"skip_prev",SKIP_NEXT:"skip_next"},i(f,h),i(g,h),h.prototype.serialize=function(){for(var a,b={},c=0,d=this._props.length;d>c;c++)a=this._props[c],void 0!==this[a]&&(this[a]instanceof h?b[a]=this[a].serialize():b[a]=this[a]);return b},c.PlayerState=e},"./node_modules/spotify-live/node_modules/mout/lang/isKind.js":function(a,b,c,d){function e(a,b){return f(a)===b}var f=a("./node_modules/spotify-live/node_modules/mout/lang/kindOf.js");b.exports=e},"./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/src/deferred.js":function(a,b,c,d){"use strict";function e(){var a=g.splice(0);if(a.length)for(var b=0,c=a.length;c>b;b++)try{a[b]()}finally{}}var f=a("./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/node_modules/spotify-postrouter/src/postrouter.js"),g=[],h=function(){f.sendLocalMessage("execute_deferreds")};f.addMessageHandler("execute_deferreds",e);var i=function(a){var b=!g.length;g.push(a),b&&h()};b.exports=i},"./node_modules/spotify-cosmos-api/node_modules/spotify-deferred/node_modules/spotify-postrouter/src/postrouter.js":function(a,b,c,d){"use strict";function e(a){var b=l[a.type];b&&b.fn.call(this,a)}function f(a){var b=a.data;if(!h){if("string"!=typeof b)return;try{b=JSON.parse(b)}catch(c){return}}if(a.origin!=j||(b=b[g])){var d=l[b.type];!d||"*"!=d.origin&&a.origin!==d.origin||d.fn.call(this,b,a)}}var g="post-router-msg-"+(new Date).getTime(),h=!1,i=i?i:setTimeout,j=void 0;if("undefined"!=typeof window&&(j=window.location.origin||window.location.protocol+"//"+window.location.hostname,!window.__forceNoStructuredClone))try{window.postMessage({toString:function(){return"clone-test"}},j),h=!1}catch(k){h=!0}var l={},m=!1,n=function(){window.attachEvent&&!window.addEventListener?window.attachEvent("onmessage",f):window.attachEvent&&window.addEventListener?window.addEventListener("message",f,!1):window.addEventListener&&window.addEventListener("message",f,!1)},o=function(a,b,c){if("undefined"==typeof window||m||(n(),m=!0),c||(c=j),l[a])throw new Error('Rehandling of message "'+a+'" not allowed.');l[a]={fn:b,origin:c}},p=function(a,b){return!l[a]||b&&l[a].fn!==b?!1:(l[a]=null,!0)},q=function(a,b,c,d){return b=b||{},b.type=a,"undefined"==typeof window?i(e.bind(null,b)):(c=c||window,d||(d=j),void c.postMessage(JSON.stringify(b),d))},r=function(a,b){if(b=b||{},b.type=a,"undefined"==typeof window)return i(e.bind(null,b));var c={};c[g]=b,window.postMessage(h?c:JSON.stringify(c),j)};b.exports={addMessageHandler:o,removeMessageHandler:p,sendMessage:q,sendLocalMessage:r,WINDOW_ORIGIN:j}},"./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/index.js":function(a,b,c,d){"use strict";b.exports={inherit:a("./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/inherit.js"),extend:a("./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/extend.js")}},"./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/extend.js":function(a,b,c,d){"use strict";var e=function(a,b){for(var c,d=1;d<arguments.length;d++)if(c=arguments[d])for(var e in c)c.hasOwnProperty(e)&&(a[e]=c[e]);return a};b.exports=e},"./node_modules/spotify-cosmos-api/node_modules/spotify-inheritance/inherit.js":function(a,b,c,d){"use strict";var e=function(a,b){function c(){}var d=b.prototype;c.prototype=a._super=d,c.prototype.constructor=b,a.prototype=new c};b.exports=e}});